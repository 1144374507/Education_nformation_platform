{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import _objectSpread from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{PureComponent}from'react';import{nanoid}from'nanoid';// import axios from 'axios'\n// import store from '../../../../../redux/store'\nimport PubSub from'pubsub-js';// import PubSub from 'pubsub-js'\nimport SearchTeacher from'../../../../../components/content/SearchTeacher';import MessageCar from'../../../../../components/content/MessageCar';// import './css/index.css'\nvar Teachers=/*#__PURE__*/function(_PureComponent){_inherits(Teachers,_PureComponent);var _super=_createSuper(Teachers);function Teachers(){var _this;_classCallCheck(this,Teachers);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={teachers:[],classes:[],hasError:''};return _this;}_createClass(Teachers,[{key:\"componentDidCatch\",value:function componentDidCatch(){console.log('此处统计错误，反馈给服务器，用于通知编码人员进行bug的解决');}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.token=PubSub.subscribe('pubTeachers',function(_,data){_this2.setState({teachers:data});});this.token2=PubSub.subscribe('chooceCourse',function(_,data){var teachersARR=_this2.props.classMember.teachers.filter(function(array){return JSON.stringify(array).indexOf(data)>-1;});_this2.setState({teachers:teachersARR});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){// console.log('dasdsadsa');\nPubSub.unsubscribe(this.token);PubSub.unsubscribe(this.token2);}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,headmaster=_this$state.classes.headmaster,teachers=_this$state.teachers;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"class-detail-message\",children:[/*#__PURE__*/_jsx(SearchTeacher,{headmaster:headmaster}),teachers.map(function(teacherobj){return _this3.state.hasError?/*#__PURE__*/_jsx(\"h2\",{children:\"\\u5F53\\u524D\\u7F51\\u7EDC\\u4E0D\\u7A33\\u5B9A\\uFF0C\\u7A0D\\u540E\\u518D\\u8BD5\"}):/*#__PURE__*/_jsx(MessageCar,_objectSpread({},teacherobj),nanoid());})]})});}}],[{key:\"getDerivedStateFromError\",//当子组件出现报错时候，会触发getDerivedStateFromError调用，并携带错误信息\nvalue:function getDerivedStateFromError(error){return{hasError:error};}}]);return Teachers;}(PureComponent);export{Teachers as default};","map":{"version":3,"sources":["C:/Users/郭晓飞/Desktop/Edu/Education_nformation_platform/src/page/Set/Class/Detail/Teachers/index.jsx"],"names":["React","PureComponent","nanoid","PubSub","SearchTeacher","MessageCar","Teachers","state","teachers","classes","hasError","console","log","token","subscribe","_","data","setState","token2","teachersARR","props","classMember","filter","array","JSON","stringify","indexOf","unsubscribe","headmaster","map","teacherobj","error"],"mappings":"m/BAAA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,KAAqC,OAArC,CAEA,OAASC,MAAT,KAAuB,QAAvB,CACA;AAEA;AACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA;AAEA,MAAOC,CAAAA,aAAP,KAA0B,iDAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,8CAAvB,CAEA;GAEqBC,CAAAA,Q,2UAEnBC,K,CAAQ,CACNC,QAAQ,CAAE,EADJ,CAENC,OAAO,CAAE,EAFH,CAGNC,QAAQ,CAAE,EAHJ,C,iGAWY,CAClBC,OAAO,CAACC,GAAR,CAAY,gCAAZ,EACD,C,6DAEmB,iBAClB,KAAKC,KAAL,CAAaV,MAAM,CAACW,SAAP,CAAiB,aAAjB,CAAgC,SAACC,CAAD,CAAIC,IAAJ,CAAa,CACxD,MAAI,CAACC,QAAL,CAAc,CAAET,QAAQ,CAAEQ,IAAZ,CAAd,EACD,CAFY,CAAb,CAGA,KAAKE,MAAL,CAAcf,MAAM,CAACW,SAAP,CAAiB,cAAjB,CAAiC,SAACC,CAAD,CAAIC,IAAJ,CAAa,CAC1D,GAAMG,CAAAA,WAAW,CAAG,MAAI,CAACC,KAAL,CAAWC,WAAX,CAAuBb,QAAvB,CAAgCc,MAAhC,CAAuC,SAAAC,KAAK,QAAIC,CAAAA,IAAI,CAACC,SAAL,CAAeF,KAAf,EAAsBG,OAAtB,CAA8BV,IAA9B,EAAsC,CAAC,CAA3C,EAA5C,CAApB,CACA,MAAI,CAACC,QAAL,CAAc,CAAET,QAAQ,CAAEW,WAAZ,CAAd,EACD,CAHa,CAAd,CAKD,C,mEAEsB,CACrB;AACAhB,MAAM,CAACwB,WAAP,CAAmB,KAAKd,KAAxB,EACAV,MAAM,CAACwB,WAAP,CAAmB,KAAKT,MAAxB,EACD,C,uCAEQ,iCAEuC,KAAKX,KAF5C,CAEYqB,UAFZ,aAECnB,OAFD,CAEYmB,UAFZ,CAE0BpB,QAF1B,aAE0BA,QAF1B,CAGP,mBACE,kCAEE,aAAK,SAAS,CAAC,sBAAf,wBAGE,KAAC,aAAD,EAAe,UAAU,CAAEoB,UAA3B,EAHF,CAOIpB,QAAQ,CAACqB,GAAT,CAAa,SAAAC,UAAU,QACrB,CAAA,MAAI,CAACvB,KAAL,CAAWG,QAAX,cAAsB,gGAAtB,cAA8C,KAAC,UAAD,kBAAgCoB,UAAhC,EAAiB5B,MAAM,EAAvB,CADzB,EAAvB,CAPJ,GAFF,EADF,CAiBD,C,oCA9CD;wCACgC6B,K,CAAO,CACrC,MAAO,CAAErB,QAAQ,CAAEqB,KAAZ,CAAP,CACD,C,sBAXmC9B,a,SAAjBK,Q","sourcesContent":["import React, { PureComponent } from 'react'\r\n\r\nimport { nanoid } from 'nanoid'\r\n// import axios from 'axios'\r\n\r\n// import store from '../../../../../redux/store'\r\nimport PubSub from 'pubsub-js'\r\n// import PubSub from 'pubsub-js'\r\n\r\nimport SearchTeacher from '../../../../../components/content/SearchTeacher'\r\nimport MessageCar from '../../../../../components/content/MessageCar'\r\n\r\n// import './css/index.css'\r\n\r\nexport default class Teachers extends PureComponent {\r\n\r\n  state = {\r\n    teachers: [],\r\n    classes: [],\r\n    hasError: ''\r\n  }\r\n\r\n  //当子组件出现报错时候，会触发getDerivedStateFromError调用，并携带错误信息\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: error }\r\n  }\r\n\r\n  componentDidCatch() {\r\n    console.log('此处统计错误，反馈给服务器，用于通知编码人员进行bug的解决');\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.token = PubSub.subscribe('pubTeachers', (_, data) => {\r\n      this.setState({ teachers: data })\r\n    })\r\n    this.token2 = PubSub.subscribe('chooceCourse', (_, data) => {\r\n      const teachersARR = this.props.classMember.teachers.filter(array => JSON.stringify(array).indexOf(data) > -1)\r\n      this.setState({ teachers: teachersARR })\r\n    })\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // console.log('dasdsadsa');\r\n    PubSub.unsubscribe(this.token)\r\n    PubSub.unsubscribe(this.token2)\r\n  }\r\n\r\n  render() {\r\n\r\n    const { classes: { headmaster }, teachers } = this.state\r\n    return (\r\n      <div>\r\n        {/* 班级信息 */}\r\n        <div className='class-detail-message' >\r\n\r\n          {/* 科任老师筛选组件 */}\r\n          <SearchTeacher headmaster={headmaster} ></SearchTeacher>\r\n\r\n          {/* 科任老师 */}\r\n          {\r\n            teachers.map(teacherobj =>\r\n              this.state.hasError ? <h2>当前网络不稳定，稍后再试</h2> : <MessageCar key={nanoid()}  {...teacherobj} ></MessageCar>\r\n            )\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}