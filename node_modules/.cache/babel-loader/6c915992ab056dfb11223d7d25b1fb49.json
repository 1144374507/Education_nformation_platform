{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\u90ED\\u6653\\u98DE\\\\Desktop\\\\Edu\\\\Education_nformation_platform\\\\src\\\\page\\\\Set\\\\Class\\\\Create\\\\index.jsx\";\nimport React, { Component } from 'react';\nimport PubSub from 'pubsub-js';\nimport BackClassBtn from '../../../../components/content/BackClassBtn';\nimport SingleBox from '../../../../components/commom/SingleBox';\nimport DropDowm from '../../../../components/commom/DropDowm';\nimport './css/index.css';\nexport default class CreateClass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      newClass: {\n        school: '',\n        section: '',\n        grade: '',\n        course: '',\n        type: \"\",\n        exitPermissions: \"\"\n      }\n    };\n    this.schoolRef = /*#__PURE__*/React.createRef();\n    this.schoolChildRef = /*#__PURE__*/React.createRef();\n    this.classRef = /*#__PURE__*/React.createRef();\n    this.classChildRef = /*#__PURE__*/React.createRef();\n\n    this.saveData = e => {\n      // 取消按钮默认点击事件\n      e.preventDefault(); // 连续结构赋值和重命名\n      // const { schoolRef: { current: schoolCurrent }, classRef: { current: classCurrent } } = this\n      // console.log(schoolCurrent.value);\n      // console.log(classCurrent.value);\n\n      console.log(this.state);\n    };\n\n    this.loseFocus = () => {\n      const {\n        schoolRef,\n        schoolRef: {\n          current: {\n            value\n          }\n        },\n        schoolChildRef,\n        addClass,\n        deleClass,\n        state: {\n          newClass\n        },\n        schoolRef: {\n          current: schoolCurrent\n        }\n      } = this;\n      const reg = new RegExp('^[\\u4e00-\\u9fa5 ]{4,20}$|^[A-z ]{5,50}$', 'g');\n      let str = value; // 去除中间多余的空格\n\n      str = str.replace(/\\s{2,}/g, \" \"); // 去除首尾的空格\n\n      str = str.replace(/^\\s*|\\s*$/g, \"\");\n      schoolRef.current.value = str;\n      console.log(schoolRef.current.value);\n      const reslt = reg.test(str);\n\n      if (!Boolean(reslt)) {\n        deleClass(schoolChildRef.current, 'school-true-tips');\n        deleClass(schoolChildRef.current, 'school-tips-false');\n      } else {\n        deleClass(schoolChildRef.current, 'school-tips-false');\n        addClass(schoolChildRef.current, 'school-true-tips');\n        const setSchool = { ...newClass,\n          school: schoolCurrent.value\n        };\n        console.log(setSchool);\n        this.setState({\n          newClass: setSchool\n        }, () => {\n          console.log(this.state);\n        });\n      }\n    };\n\n    this.loseClassFocus = () => {\n      const {\n        classRef,\n        classRef: {\n          current: {\n            value\n          }\n        },\n        classChildRef,\n        addClass,\n        deleClass,\n        classRef: {\n          current: classCurrent\n        },\n        state: {\n          newClass\n        }\n      } = this;\n      const reg = /^[\\u4e00-\\u9fa5A-z ]{1,20}$/g;\n      let str = value; // 去除中间多余的空格\n\n      str = str.replace(/\\s{2,}/g, \" \"); // 去除首尾的空格\n\n      str = str.replace(/^\\s*|\\s*$/g, \"\"); //去除_和%\n\n      str = str.replace(/[_%]/g, '');\n      classRef.current.value = str; // console.log(classRef.current.value);\n\n      const reslt = reg.test(str);\n\n      if (!reslt) {\n        deleClass(classChildRef.current, 'course-tips-true');\n        deleClass(classChildRef.current, 'course-tips-false');\n      } else {\n        deleClass(classChildRef.current, 'course-tips-false');\n        addClass(classChildRef.current, 'course-tips-true');\n        const setClass = { ...newClass,\n          course: classCurrent.value\n        };\n        this.setState({\n          newClass: setClass\n        });\n      }\n    };\n\n    this.addClass = (obj, cn) => {\n      // 检查是否有cn\n      if (!this.hasClass(obj, cn)) {\n        obj.className += \" \" + cn;\n      }\n    };\n\n    this.hasClass = (obj, cn) => {\n      const reg = new RegExp(\"\\\\b\" + cn + \"\\\\b\");\n      return reg.test(obj.className);\n    };\n\n    this.deleClass = (obj, cn) => {\n      // 查找是否存在\n      const reg1 = new RegExp(\"\\\\b\" + cn + \"\\\\b\", \"ig\"); // console.log(reg1);\n      //删除class\n\n      obj.className = obj.className.replace(reg1, \"\");\n    };\n\n    this.toggleClass = (obj, cn) => {\n      //判断obj中是否含有cn\n      if (this.hasClass(obj, cn)) {\n        //有，则删除\n        this.deleClass(obj, cn);\n      } else {\n        //没有，则添加\n        this.addClass(obj, cn);\n      }\n    };\n  }\n\n  // 模块加载完毕的生命周期函数\n  componentDidMount() {\n    const {\n      newClass\n    } = this.state; // console.log('1111');\n    // 订阅 sectionValue\n\n    this.token1 = PubSub.subscribe('sectionValue', (a, section) => {\n      // console.log('111');\n      const setSection = { ...newClass,\n        section\n      };\n      this.setState({\n        newClass: setSection\n      }); // console.log(this.state);\n    }); // 订阅 gradeValue\n\n    this.token2 = PubSub.subscribe('gradeValue', (a, grade) => {\n      const {\n        newClass\n      } = this.state; // console.log('222');\n\n      const setGrade = { ...newClass,\n        grade\n      };\n      this.setState({\n        newClass: setGrade\n      }); // console.log(this.state);\n    });\n  } // 模块将要卸载的生命周期函数\n\n\n  componentWillUnmount() {\n    PubSub.unsubscribe('sectionValue');\n    PubSub.unsubscribe('gradeValue');\n  } // 点击保存按钮的回调\n\n\n  render() {\n    const classType = ['行政班', '教学班'];\n    const exitPermissions = ['允许退出', '通知班级管理员审核后退出', '禁止退出'];\n    const grade = ['年级', '一年级', '二年级', '三年级', '四年级'];\n    const section = ['学段', '小学', '初中', '高中', '大学'];\n    const {\n      saveData,\n      loseFocus,\n      loseClassFocus\n    } = this;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"class-create-totabar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"contenter-top-nav-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"route-title\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u6211\\u7684\\u73ED\\u7EA7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(BackClassBtn, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"class-create-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"create-tip\",\n            children: [\"\\u5C0A\\u656C\\u7684\", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u8001\\u5E08(\\u5218\\u8001\\u5E08)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 42\n            }, this), \"\\uFF0C\\u8BF7\\u586B\\u5199\\u73ED\\u7EA7\\u4FE1\\u606F\\uFF1A\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            action: \"\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"school\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                children: \"\\u5B66\\u6821\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                onBlur: loseFocus,\n                ref: this.schoolRef,\n                type: \"text\",\n                placeholder: \"\\u8BF7\\u9009\\u62E9\\u5B66\\u6821\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 26\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: this.schoolChildRef,\n                className: \"school-tips school-true-tips school-tips-false \",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 108\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\u8BF7\\u8F93\\u51654-20\\u4F4D\\u7684\\u4E2D\\u6587\\u6216\\u80055-50\\u4F4D\\u7684\\u5B57\\u6BCD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 119\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"*\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 20\n                }, this), \"\\u5B66\\u6BB5\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(DropDowm, {\n                data: section,\n                pubName: \"sectionValue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grade\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"*\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 20\n                }, this), \"\\u5E74\\u7EA7\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(DropDowm, {\n                data1: grade,\n                pubName: \"gradeValue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"class-name\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"*\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 20\n                }, this), \"\\u73ED\\u7EA7\\u540D\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                onBlur: loseClassFocus,\n                ref: this.classRef,\n                type: \"text\",\n                name: \"\",\n                id: \"\",\n                placeholder: \"\\u8BF7\\u8F93\\u5165\\u73ED\\u7EA7\\u540D\\u79F0\\uFF0C\\u965020\\u5B57\\u7B26\\uFF0C\\u4E0D\\u652F\\u6301\\u8F93\\u5165_\\u548C%\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: this.classChildRef,\n                className: \"course-tips course-tips-true course-tips-false\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 106\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\u965020\\u5B57\\u7B26\\uFF0C\\u4E0D\\u652F\\u6301\\u8F93\\u5165_\\u548C%' \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 117\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"class-type\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                children: \"\\u7C7B\\u578B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(SingleBox, {\n                data1: classType\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"exit-permissions\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                children: \"\\u9000\\u51FA\\u6743\\u9650\\u8BBE\\u7F6E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(SingleBox, {\n                data: exitPermissions\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: saveData,\n              children: \"\\u4FDD\\u5B58\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/郭晓飞/Desktop/Edu/Education_nformation_platform/src/page/Set/Class/Create/index.jsx"],"names":["React","Component","PubSub","BackClassBtn","SingleBox","DropDowm","CreateClass","state","newClass","school","section","grade","course","type","exitPermissions","schoolRef","createRef","schoolChildRef","classRef","classChildRef","saveData","e","preventDefault","console","log","loseFocus","current","value","addClass","deleClass","schoolCurrent","reg","RegExp","str","replace","reslt","test","Boolean","setSchool","setState","loseClassFocus","classCurrent","setClass","obj","cn","hasClass","className","reg1","toggleClass","componentDidMount","token1","subscribe","a","setSection","token2","setGrade","componentWillUnmount","unsubscribe","render","classType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport PubSub from 'pubsub-js'\r\n\r\nimport BackClassBtn from '../../../../components/content/BackClassBtn'\r\nimport SingleBox from '../../../../components/commom/SingleBox'\r\nimport DropDowm from '../../../../components/commom/DropDowm'\r\nimport './css/index.css'\r\n\r\nexport default class CreateClass extends Component {\r\n\r\n  state = {\r\n    newClass: { school: '', section: '', grade: '', course: '', type: \"\", exitPermissions: \"\" },\r\n  }\r\n\r\n  schoolRef = React.createRef()\r\n  schoolChildRef = React.createRef()\r\n  classRef = React.createRef()\r\n  classChildRef = React.createRef()\r\n\r\n  // 模块加载完毕的生命周期函数\r\n  componentDidMount() {\r\n    const { newClass } = this.state\r\n    // console.log('1111');\r\n    // 订阅 sectionValue\r\n    this.token1 = PubSub.subscribe('sectionValue', (a, section) => {\r\n      // console.log('111');\r\n      const setSection = { ...newClass, section }\r\n      this.setState({ newClass: setSection })\r\n      // console.log(this.state);\r\n\r\n    })\r\n    // 订阅 gradeValue\r\n    this.token2 = PubSub.subscribe('gradeValue', (a, grade) => {\r\n      const { newClass } = this.state\r\n      // console.log('222');\r\n      const setGrade = { ...newClass, grade }\r\n      this.setState({ newClass: setGrade })\r\n      // console.log(this.state);\r\n    })\r\n  }\r\n\r\n  // 模块将要卸载的生命周期函数\r\n  componentWillUnmount() {\r\n    PubSub.unsubscribe('sectionValue')\r\n    PubSub.unsubscribe('gradeValue')\r\n  }\r\n  // 点击保存按钮的回调\r\n  saveData = (e) => {\r\n    // 取消按钮默认点击事件\r\n    e.preventDefault()\r\n    // 连续结构赋值和重命名\r\n    // const { schoolRef: { current: schoolCurrent }, classRef: { current: classCurrent } } = this\r\n    // console.log(schoolCurrent.value);\r\n    // console.log(classCurrent.value);\r\n\r\n\r\n    console.log(this.state);\r\n  }\r\n\r\n  // school 失去焦点的回调\r\n  loseFocus = () => {\r\n    const {\r\n      schoolRef,\r\n      schoolRef: { current: { value } },\r\n      schoolChildRef,\r\n      addClass,\r\n      deleClass,\r\n      state: { newClass },\r\n      schoolRef: { current: schoolCurrent },\r\n\r\n    } = this\r\n    const reg = new RegExp('^[\\u4e00-\\u9fa5 ]{4,20}$|^[A-z ]{5,50}$', 'g')\r\n    let str = value\r\n    // 去除中间多余的空格\r\n    str = str.replace(/\\s{2,}/g, \" \")\r\n    // 去除首尾的空格\r\n    str = str.replace(/^\\s*|\\s*$/g, \"\")\r\n    schoolRef.current.value = str\r\n\r\n    console.log(schoolRef.current.value);\r\n    const reslt = reg.test(str)\r\n    if (!Boolean(reslt)) {\r\n      deleClass(schoolChildRef.current, 'school-true-tips')\r\n      deleClass(schoolChildRef.current, 'school-tips-false')\r\n    } else {\r\n      deleClass(schoolChildRef.current, 'school-tips-false')\r\n      addClass(schoolChildRef.current, 'school-true-tips')\r\n\r\n      const setSchool = { ...newClass, school: schoolCurrent.value }\r\n      console.log(setSchool);\r\n      this.setState({ newClass: setSchool }, () => {\r\n        console.log(this.state);\r\n      })\r\n\r\n    }\r\n  }\r\n  //class-name 失去焦点的回调\r\n  loseClassFocus = () => {\r\n    const {\r\n      classRef, classRef: { current: { value } },\r\n      classChildRef, addClass, deleClass,\r\n      classRef: { current: classCurrent },\r\n      state: { newClass }\r\n    } = this\r\n    const reg = /^[\\u4e00-\\u9fa5A-z ]{1,20}$/g\r\n    let str = value\r\n\r\n    // 去除中间多余的空格\r\n    str = str.replace(/\\s{2,}/g, \" \")\r\n    // 去除首尾的空格\r\n    str = str.replace(/^\\s*|\\s*$/g, \"\")\r\n    //去除_和%\r\n    str = str.replace(/[_%]/g, '')\r\n    classRef.current.value = str\r\n    // console.log(classRef.current.value);\r\n    const reslt = reg.test(str)\r\n    if (!reslt) {\r\n      deleClass(classChildRef.current, 'course-tips-true')\r\n      deleClass(classChildRef.current, 'course-tips-false')\r\n    } else {\r\n      deleClass(classChildRef.current, 'course-tips-false')\r\n      addClass(classChildRef.current, 'course-tips-true')\r\n      const setClass = { ...newClass, course: classCurrent.value }\r\n      this.setState({ newClass: setClass })\r\n\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  // 添加class\r\n  addClass = (obj, cn) => {\r\n    // 检查是否有cn\r\n    if (!this.hasClass(obj, cn)) {\r\n      obj.className += \" \" + cn\r\n    }\r\n  }\r\n  // 检查是否有cn\r\n  hasClass = (obj, cn) => {\r\n    const reg = new RegExp(\"\\\\b\" + cn + \"\\\\b\")\r\n    return reg.test(obj.className);\r\n  }\r\n  // 删除class\r\n  deleClass = (obj, cn) => {\r\n    // 查找是否存在\r\n    const reg1 = new RegExp(\"\\\\b\" + cn + \"\\\\b\", \"ig\");\r\n    // console.log(reg1);\r\n    //删除class\r\n    obj.className = obj.className.replace(reg1, \"\");\r\n  }\r\n  /*\r\n   * toggleClass 可以用来切换一个类\r\n   * \t如果元素中具有该类，则删除\r\n   * \t如果元素中没有该类，则添加\r\n   */\r\n  toggleClass = (obj, cn) => {\r\n    //判断obj中是否含有cn\r\n    if (this.hasClass(obj, cn)) {\r\n      //有，则删除\r\n      this.deleClass(obj, cn);\r\n    } else {\r\n      //没有，则添加\r\n      this.addClass(obj, cn);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const classType = ['行政班', '教学班']\r\n    const exitPermissions = ['允许退出', '通知班级管理员审核后退出', '禁止退出']\r\n    const grade = ['年级', '一年级', '二年级', '三年级', '四年级']\r\n    const section = ['学段', '小学', '初中', '高中', '大学']\r\n    const { saveData, loseFocus, loseClassFocus } = this\r\n    return (\r\n      <div>\r\n        <div className='class-create-totabar'>\r\n          {/* 顶部导航 */}\r\n          <div className=\"contenter-top-nav-bar\">\r\n            <div className=\"route-title\">\r\n              <h2 >我的班级</h2>\r\n            </div>\r\n            {/* <button className='creat-class'>创建班级</button> */}\r\n            <BackClassBtn />\r\n          </div>\r\n\r\n          <div className=\"class-create-bar\">\r\n            <p className='create-tip'>尊敬的<span>老师(刘老师)</span>，请填写班级信息：</p>\r\n            <form action=\"\">\r\n\r\n              {/* 输入学校 */}\r\n              <div className='school'>\r\n                <i>学校</i><input onBlur={loseFocus} ref={this.schoolRef} type=\"text\" placeholder='请选择学校' />\r\n                <div ref={this.schoolChildRef} className='school-tips school-true-tips school-tips-false '><div></div><p>请输入4-20位的中文或者5-50位的字母</p></div>\r\n              </div>\r\n\r\n              {/* 选择选段 */}\r\n              <div className=\"section\">\r\n                <i><span>*</span>学段</i>\r\n                <DropDowm data={section} pubName='sectionValue' />\r\n              </div>\r\n\r\n              {/* 选择年级 */}\r\n              <div className=\"grade\">\r\n                <i><span>*</span>年级</i>\r\n                <DropDowm data1={grade} pubName='gradeValue' />\r\n              </div>\r\n\r\n              {/* 输入班级名 */}\r\n              <div className='class-name'>\r\n                <i><span>*</span>班级名</i><input onBlur={loseClassFocus} ref={this.classRef} type=\"text\" name=\"\" id=\"\" placeholder='请输入班级名称，限20字符，不支持输入_和%' />\r\n                <div ref={this.classChildRef} className='course-tips course-tips-true course-tips-false'><div></div><p>限20字符，不支持输入_和%' </p></div>\r\n              </div>\r\n\r\n              {/* 选择类型 */}\r\n              <div className='class-type'>\r\n                <i>类型</i>\r\n                <SingleBox data1={classType} />\r\n              </div>\r\n\r\n              {/* 退出权限设置 */}\r\n              <div className='exit-permissions'>\r\n                <i>退出权限设置</i>\r\n                <SingleBox data={exitPermissions} />\r\n              </div>\r\n              {/* 保存按钮 */}\r\n              <button onClick={saveData}>保存</button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}