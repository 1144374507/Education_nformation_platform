{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{PureComponent}from'react';import PubSub from'pubsub-js';import{addClass,deleClass,toggleClass}from'../../../func/toggleClass';import'./css/index.css';var DropDowm=/*#__PURE__*/function(_PureComponent){_inherits(DropDowm,_PureComponent);var _super=_createSuper(DropDowm);function DropDowm(){var _this;_classCallCheck(this,DropDowm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={title:'请选择年级',lisHeightCount:0};_this.showDRopDowmList=function(event){var data=_this.props.data;var childNodes=event.target.childNodes;var _assertThisInitialize=_assertThisInitialized(_this),dropDowmList=_assertThisInitialize.dropDowmList,lisHeightCount=_assertThisInitialize.state.lisHeightCount;toggleClass(dropDowmList,'dropdown-ul-active');toggleClass(childNodes[1],'dropdown-icon-active');if(lisHeightCount===0){_this.setState({lisHeightCount:34*(data.length-1)});}else{_this.setState({lisHeightCount:0});}};_this.onMouseEnterUl=function(){var _assertThisInitialize2=_assertThisInitialized(_this),childNodes=_assertThisInitialize2.dropDowmInpt.childNodes,timer=_assertThisInitialize2.timer;clearTimeout(timer);addClass(childNodes[1],'dropdown-icon-active');};_this.mouseleaveUL=function(){var _assertThisInitialize3=_assertThisInitialized(_this),childNodes=_assertThisInitialize3.dropDowmInpt.childNodes;deleClass(childNodes[1],'dropdown-icon-active');_this.setState({lisHeightCount:0});};_this.mouseleaveP=function(){var _assertThisInitialize4=_assertThisInitialized(_this),childNodes=_assertThisInitialize4.dropDowmInpt.childNodes;_this.timer=setTimeout(function(){deleClass(childNodes[1],'dropdown-icon-active');_this.setState({lisHeightCount:0});},300);};_this.showDRopDowmLi=function(index){var _assertThisInitialize5=_assertThisInitialized(_this),_assertThisInitialize6=_assertThisInitialize5.props,pubName=_assertThisInitialize6.pubName,liValue=_assertThisInitialize6.liValue,setDropDowmValue=_assertThisInitialize6.setDropDowmValue;return function(){var _assertThisInitialize7=_assertThisInitialized(_this),childNodes=_assertThisInitialize7.dropDowmInpt.childNodes;var data=_this.props.data;toggleClass(childNodes[1],'dropdown-icon-active');data.map(function(value,index1){if(index1===index){_this.setState({title:value},function(){if(!(pubName===undefined)){// 发布事件的名字由父元素传入\nPubSub.publish(pubName,value);}});_this.setState({lisHeightCount:0});// 判断是否使用react-redux\nif(!(liValue===undefined)){var resl=_defineProperty({},liValue,value);setDropDowmValue(resl);}}return[];});};};return _this;}_createClass(DropDowm,[{key:\"componentDidMount\",//生命周期函数 初始化 title\nvalue:function componentDidMount(){var data=this.props.data;this.setState({title:\"\\u8BF7\\u9009\\u62E9\".concat(data[0])});}// 点击 p 标签 展示 ul 下拉框\n},{key:\"render\",value:function render(){var _this2=this;var data=this.props.data;var showDRopDowmLi=this.showDRopDowmLi,showDRopDowmList=this.showDRopDowmList,_this$state=this.state,title=_this$state.title,lisHeightCount=_this$state.lisHeightCount,mouseleaveUL=this.mouseleaveUL,onMouseEnterUl=this.onMouseEnterUl,mouseleaveP=this.mouseleaveP;return/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown\",children:[/*#__PURE__*/_jsxs(\"p\",{onMouseLeave:mouseleaveP,ref:function ref(e){return _this2.dropDowmInpt=e;},onClick:showDRopDowmList,children:[title,/*#__PURE__*/_jsx(\"span\",{className:\"dropdown-icon\"})]}),/*#__PURE__*/_jsx(\"ul\",{onMouseEnter:onMouseEnterUl,onMouseLeave:mouseleaveUL,className:\"dropdown-ul\",ref:function ref(e){return _this2.dropDowmList=e;},style:{height:lisHeightCount},children:data.map(function(value,index){return index!==0?/*#__PURE__*/_jsxs(\"li\",{onClick:showDRopDowmLi(index),children:[\" \",value]},index):'';})})]});}}]);return DropDowm;}(PureComponent);DropDowm.defaultProps={//设置prop的默认值\ndata:['  &&选中的内容&&','请传入','一个数组','作为','列表项','数组的第一个值为选中的内容']};export{DropDowm as default};","map":{"version":3,"sources":["C:/Users/郭晓飞/Desktop/Edu/Education_nformation_platform/src/components/commom/DropDowm/index.jsx"],"names":["React","PureComponent","PubSub","addClass","deleClass","toggleClass","DropDowm","state","title","lisHeightCount","showDRopDowmList","event","data","props","childNodes","target","dropDowmList","setState","length","onMouseEnterUl","dropDowmInpt","timer","clearTimeout","mouseleaveUL","mouseleaveP","setTimeout","showDRopDowmLi","index","pubName","liValue","setDropDowmValue","map","value","index1","undefined","publish","resl","e","height","defaultProps"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport PubSub from 'pubsub-js'\r\n\r\nimport {\r\n  addClass,\r\n  deleClass,\r\n  toggleClass\r\n} from '../../../func/toggleClass'\r\n\r\nimport './css/index.css'\r\n\r\nexport default class DropDowm extends PureComponent {\r\n\r\n  static propTypes = {\r\n    pubName: PropTypes.string,//pubsub 订阅-发布 的事件名\r\n    liValue: PropTypes.string,//作为react-redux action 的 key\r\n    data: PropTypes.array,//下拉列表，列表项的值，数组第一个为下拉列表的默认值\r\n\r\n  }\r\n  static defaultProps = {//设置prop的默认值\r\n    data: ['  &&选中的内容&&', '请传入', '一个数组', '作为', '列表项', '数组的第一个值为选中的内容']\r\n  }\r\n  state = {\r\n    title: '请选择年级',\r\n    lisHeightCount: 0\r\n  }\r\n\r\n  //生命周期函数 初始化 title\r\n  componentDidMount() {\r\n    const data = this.props.data \r\n    this.setState({ title: `请选择${data[0]}` })\r\n  }\r\n\r\n  // 点击 p 标签 展示 ul 下拉框\r\n  showDRopDowmList = (event) => {\r\n    const data = this.props.data \r\n    const { childNodes } = event.target\r\n    const { dropDowmList, state: { lisHeightCount } } = this\r\n    toggleClass(dropDowmList, 'dropdown-ul-active')\r\n    toggleClass(childNodes[1], 'dropdown-icon-active')\r\n    if (lisHeightCount === 0) {\r\n      this.setState({ lisHeightCount: 34 * (data.length - 1) })\r\n    } else {\r\n      this.setState({ lisHeightCount: 0 })\r\n\r\n    }\r\n  }\r\n\r\n  // 鼠标移入ul事件回调\r\n  onMouseEnterUl = () => {\r\n    const { dropDowmInpt: { childNodes }, timer } = this\r\n    clearTimeout(timer)\r\n    addClass(childNodes[1], 'dropdown-icon-active')\r\n\r\n  }\r\n  // 鼠标移出ul事件回调\r\n  mouseleaveUL = () => {\r\n    const { dropDowmInpt: { childNodes }, } = this\r\n\r\n    deleClass(childNodes[1], 'dropdown-icon-active')\r\n    this.setState({ lisHeightCount: 0 })\r\n\r\n  }\r\n  // 鼠标移出p事件回调\r\n  mouseleaveP = () => {\r\n    const { dropDowmInpt: { childNodes }, } = this\r\n\r\n    this.timer = setTimeout(() => {\r\n\r\n      deleClass(childNodes[1], 'dropdown-icon-active')\r\n      this.setState({ lisHeightCount: 0 })\r\n\r\n    }, 300);\r\n  }\r\n\r\n  // 点击li选定内容回调\r\n  showDRopDowmLi = (index) => {\r\n    const { props: { pubName, liValue, setDropDowmValue }, } = this\r\n    return () => {\r\n      const { dropDowmInpt: { childNodes }, } = this\r\n      const data = this.props.data\r\n      toggleClass(childNodes[1], 'dropdown-icon-active')\r\n      data.map((value, index1) => {\r\n        if (index1 === index) {\r\n          this.setState({ title: value }, () => {\r\n\r\n            if (!(pubName === undefined)) {\r\n              // 发布事件的名字由父元素传入\r\n              PubSub.publish(pubName, value)\r\n            }\r\n          })\r\n          this.setState({ lisHeightCount: 0 })\r\n          // 判断是否使用react-redux\r\n          if (!(liValue === undefined)) {\r\n\r\n            const resl = { [liValue]: value }\r\n            setDropDowmValue(resl)\r\n          }\r\n\r\n        }\r\n        return []\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const data = this.props.data \r\n    const { showDRopDowmLi, showDRopDowmList, state: { title, lisHeightCount }, mouseleaveUL, onMouseEnterUl, mouseleaveP } = this\r\n    return (\r\n      <div className=\"dropdown\">\r\n        <p onMouseLeave={mouseleaveP} ref={e => this.dropDowmInpt = e} onClick={showDRopDowmList}>{title}<span className='dropdown-icon'></span></p>\r\n        <ul onMouseEnter={onMouseEnterUl}\r\n          onMouseLeave={mouseleaveUL}\r\n          className='dropdown-ul'\r\n          ref={e => this.dropDowmList = e}\r\n          style={{ height: lisHeightCount }}\r\n        >\r\n          {\r\n            data.map((value, index) => {\r\n\r\n              return index !== 0 ? < li onClick={showDRopDowmLi(index)} key={index} > {value}</li> : ''\r\n            })\r\n          }\r\n\r\n        </ul>\r\n      </div >\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}