{"ast":null,"code":"import _objectSpread from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{PureComponent}from'react';import{nanoid}from'nanoid';import PubSub from'pubsub-js';import MessageCar from'../../../../../components/content/MessageCar';var parents=/*#__PURE__*/function(_PureComponent){_inherits(parents,_PureComponent);var _super=_createSuper(parents);function parents(){var _this;_classCallCheck(this,parents);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={parents:[],hasError:''};return _this;}_createClass(parents,[{key:\"componentDidCatch\",value:function componentDidCatch(){console.log('此处统计错误，反馈给服务器，用于通知编码人员进行bug的解决');}//订阅 \n},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.token=PubSub.subscribe('pubParents',function(_,data){_this2.setState({parents:data});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){PubSub.unsubscribe(this.token);//取消订阅\n}},{key:\"render\",value:function render(){var _this3=this;var parents=this.state.parents;return/*#__PURE__*/_jsx(\"div\",{className:\"class-detail-message\",children:parents.map(function(parentsobj){return _this3.state.hasError?/*#__PURE__*/_jsx(\"h2\",{children:\"\\u5F53\\u524D\\u7F51\\u7EDC\\u4E0D\\u7A33\\u5B9A\\uFF0C\\u7A0D\\u540E\\u518D\\u8BD5\"}):/*#__PURE__*/_jsx(MessageCar,_objectSpread({},parentsobj),nanoid());})});}}],[{key:\"getDerivedStateFromError\",//当子组件出现报错时候，会触发getDerivedStateFromError调用，并携带错误信息\nvalue:function getDerivedStateFromError(error){return{hasError:error};}}]);return parents;}(PureComponent);export{parents as default};","map":{"version":3,"sources":["C:/Users/郭晓飞/Desktop/Edu/Education_nformation_platform/src/page/Set/Class/Detail/Parents/index.jsx"],"names":["React","PureComponent","nanoid","PubSub","MessageCar","parents","state","hasError","console","log","token","subscribe","_","data","setState","unsubscribe","map","parentsobj","error"],"mappings":"s8BAAA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,KAAqC,OAArC,CACA,OAASC,MAAT,KAAuB,QAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CAGA,MAAOC,CAAAA,UAAP,KAAuB,8CAAvB,C,GAEqBC,CAAAA,O,uUAEnBC,K,CAAQ,CACND,OAAO,CAAE,EADH,CAENE,QAAQ,CAAE,EAFJ,C,gGAUY,CAClBC,OAAO,CAACC,GAAR,CAAY,gCAAZ,EACD,CACD;6DACoB,iBAClB,KAAKC,KAAL,CAAaP,MAAM,CAACQ,SAAP,CAAiB,YAAjB,CAA+B,SAACC,CAAD,CAAIC,IAAJ,CAAa,CACvD,MAAI,CAACC,QAAL,CAAc,CAAET,OAAO,CAAEQ,IAAX,CAAd,EACD,CAFY,CAAb,CAGD,C,mEACsB,CACrBV,MAAM,CAACY,WAAP,CAAmB,KAAKL,KAAxB,EAA8B;AAC/B,C,uCAEQ,oBACCL,CAAAA,OADD,CACa,KAAKC,KADlB,CACCD,OADD,CAEP,mBACE,YAAK,SAAS,CAAC,sBAAf,UAEIA,OAAO,CAACW,GAAR,CAAY,SAAAC,UAAU,QACpB,CAAA,MAAI,CAACX,KAAL,CAAWC,QAAX,cAAsB,gGAAtB,cAA8C,KAAC,UAAD,kBAAgCU,UAAhC,EAAiBf,MAAM,EAAvB,CAD1B,EAAtB,CAFJ,EADF,CASD,C,oCA7BD;wCACgCgB,K,CAAO,CACrC,MAAO,CAAEX,QAAQ,CAAEW,KAAZ,CAAP,CACD,C,qBAVkCjB,a,SAAhBI,O","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport { nanoid } from 'nanoid'\r\nimport PubSub from 'pubsub-js'\r\n\r\n\r\nimport MessageCar from '../../../../../components/content/MessageCar'\r\n\r\nexport default class parents extends PureComponent {\r\n\r\n  state = {\r\n    parents: [],\r\n    hasError: ''\r\n  }\r\n\r\n  //当子组件出现报错时候，会触发getDerivedStateFromError调用，并携带错误信息\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: error }\r\n  }\r\n\r\n  componentDidCatch() {\r\n    console.log('此处统计错误，反馈给服务器，用于通知编码人员进行bug的解决');\r\n  }\r\n  //订阅 \r\n  componentDidMount() {\r\n    this.token = PubSub.subscribe('pubParents', (_, data) => {\r\n      this.setState({ parents: data })\r\n    })\r\n  }\r\n  componentWillUnmount() {\r\n    PubSub.unsubscribe(this.token)//取消订阅\r\n  }\r\n\r\n  render() {\r\n    const { parents } = this.state\r\n    return (\r\n      <div className='class-detail-message'>\r\n        {\r\n          parents.map(parentsobj =>\r\n            this.state.hasError ? <h2>当前网络不稳定，稍后再试</h2> : <MessageCar key={nanoid()}  {...parentsobj} ></MessageCar>\r\n          )\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}