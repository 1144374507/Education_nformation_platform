{"ast":null,"code":"import _objectSpread from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/\\u90ED\\u6653\\u98DE/Desktop/Edu/Education_nformation_platform/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{PureComponent}from'react';import{nanoid}from'nanoid';import PubSub from'pubsub-js';import MessageCar from'../../../../../components/content/MessageCar';var Studens=/*#__PURE__*/function(_PureComponent){_inherits(Studens,_PureComponent);var _super=_createSuper(Studens);function Studens(){var _this;_classCallCheck(this,Studens);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={students:[],hasError:''};return _this;}_createClass(Studens,[{key:\"componentDidCatch\",value:function componentDidCatch(){console.log('此处统计错误，反馈给服务器，用于通知编码人员进行bug的解决');}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.token=PubSub.subscribe('pubStudents',function(_,data){_this2.setState({students:data});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){PubSub.unsubscribe(this.token);}},{key:\"render\",value:function render(){var _this3=this;var students=this.state.students;return/*#__PURE__*/_jsx(\"div\",{className:\"class-detail-message\",children:students.map(function(studentsobj){return _this3.state.hasError?/*#__PURE__*/_jsx(\"h2\",{children:\"\\u5F53\\u524D\\u7F51\\u7EDC\\u4E0D\\u7A33\\u5B9A\\uFF0C\\u7A0D\\u540E\\u518D\\u8BD5\"}):/*#__PURE__*/_jsx(MessageCar,_objectSpread({},studentsobj),nanoid());})});}}],[{key:\"getDerivedStateFromError\",//当子组件出现报错时候，会触发getDerivedStateFromError调用，并携带错误信息\nvalue:function getDerivedStateFromError(error){return{hasError:error};}}]);return Studens;}(PureComponent);export{Studens as default};","map":{"version":3,"sources":["C:/Users/郭晓飞/Desktop/Edu/Education_nformation_platform/src/page/Set/Class/Detail/Studens/index.jsx"],"names":["React","PureComponent","nanoid","PubSub","MessageCar","Studens","state","students","hasError","console","log","token","subscribe","_","data","setState","unsubscribe","map","studentsobj","error"],"mappings":"s8BAAA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,KAAqC,OAArC,CACA,OAASC,MAAT,KAAuB,QAAvB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CAEA,MAAOC,CAAAA,UAAP,KAAuB,8CAAvB,C,GAGqBC,CAAAA,O,uUAEnBC,K,CAAQ,CACNC,QAAQ,CAAE,EADJ,CAENC,QAAQ,CAAE,EAFJ,C,gGAUY,CAClBC,OAAO,CAACC,GAAR,CAAY,gCAAZ,EACD,C,6DAEmB,iBAClB,KAAKC,KAAL,CAAaR,MAAM,CAACS,SAAP,CAAiB,aAAjB,CAAgC,SAACC,CAAD,CAAIC,IAAJ,CAAa,CACxD,MAAI,CAACC,QAAL,CAAc,CAAER,QAAQ,CAAEO,IAAZ,CAAd,EACD,CAFY,CAAb,CAGD,C,mEACsB,CACrBX,MAAM,CAACa,WAAP,CAAmB,KAAKL,KAAxB,EACD,C,uCAEQ,oBACCJ,CAAAA,QADD,CACc,KAAKD,KADnB,CACCC,QADD,CAEP,mBACE,YAAK,SAAS,CAAC,sBAAf,UAEIA,QAAQ,CAACU,GAAT,CAAa,SAAAC,WAAW,QACtB,CAAA,MAAI,CAACZ,KAAL,CAAWE,QAAX,cAAsB,gGAAtB,cAA8C,KAAC,UAAD,kBAAgCU,WAAhC,EAAiBhB,MAAM,EAAvB,CADxB,EAAxB,CAFJ,EADF,CAUD,C,oCA9BD;wCACgCiB,K,CAAO,CACrC,MAAO,CAAEX,QAAQ,CAAEW,KAAZ,CAAP,CACD,C,qBAVkClB,a,SAAhBI,O","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport { nanoid } from 'nanoid'\r\n\r\nimport PubSub from 'pubsub-js'\r\n\r\nimport MessageCar from '../../../../../components/content/MessageCar'\r\n\r\n\r\nexport default class Studens extends PureComponent {\r\n\r\n  state = {\r\n    students: [],\r\n    hasError: ''\r\n  }\r\n\r\n  //当子组件出现报错时候，会触发getDerivedStateFromError调用，并携带错误信息\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: error }\r\n  }\r\n\r\n  componentDidCatch() {\r\n    console.log('此处统计错误，反馈给服务器，用于通知编码人员进行bug的解决');\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.token = PubSub.subscribe('pubStudents', (_, data) => {\r\n      this.setState({ students: data })\r\n    })\r\n  }\r\n  componentWillUnmount() {\r\n    PubSub.unsubscribe(this.token)\r\n  }\r\n\r\n  render() {\r\n    const { students } = this.state\r\n    return (\r\n      <div className='class-detail-message'>\r\n        {\r\n          students.map(studentsobj =>\r\n            this.state.hasError ? <h2>当前网络不稳定，稍后再试</h2> : <MessageCar key={nanoid()}  {...studentsobj} ></MessageCar>\r\n          )\r\n        }\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}