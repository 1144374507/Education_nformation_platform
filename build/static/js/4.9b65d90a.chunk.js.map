{"version":3,"sources":["components/content/BackClassBtn/index.jsx","func/toggleClass.js","components/commom/SingleBox/index.jsx","redux/actions/singleBox.js","containers/SingleBox/index.jsx","components/commom/DropDowm/index.jsx","redux/actions/dropDowm.js","containers/DropDowm/index.jsx","page/Set/Class/Create/index.jsx","containers/Create/index.jsx","redux/actions/createClass.js"],"names":["BackClassBtn","backlCass","push","props","history","className","onClick","this","PureComponent","withRouter","addClass","obj","cn","hasClass","RegExp","test","deleClass","reg1","replace","toggleClass","SingbieBox","singleBoxFocus","index","arr","singleBoxName","singleBoxFocusValue","map","value","index1","data","token","PubSub","subscribe","unsubscribe","date","ref","e","event","preventDefault","href","defaultProps","type","SINGLEBOXFOCUSVALUE","connect","state","singleBox","SingleBox","DropDowm","title","lisHeightCount","showDRopDowmList","childNodes","target","dropDowmList","setState","length","onMouseEnterUl","dropDowmInpt","timer","clearTimeout","mouseleaveUL","mouseleaveP","setTimeout","showDRopDowmLi","pubName","liValue","setDropDowmValue","undefined","publish","resl","onMouseLeave","onMouseEnter","style","height","SETDROPDOWMVALUE","dropDowm","CreateClass","newClass","students","headmaster","schoolIstrue","classIstrue","display","width","hasError","schoolRef","React","createRef","schoolChildRef","classRef","classChildRef","schoolInptChange","current","setSchoolValue","reg","str","reslt","Boolean","school","classInptChange","setClassValue","course","saveData","createClass","section","grade","classType","exitPermissions","console","log","alert","setInterval","view","innerWidth","innerHeight","clearInterval","continueClick","action","onChange","placeholder","name","id","error","SETSCHOOL","Create"],"mappings":"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","file":"static/js/4.9b65d90a.chunk.js","sourcesContent":["import React, { PureComponent } from 'react'\r\n\r\nimport {withRouter} from 'react-router-dom'\r\n\r\nimport './css/index.css'\r\n class BackClassBtn extends PureComponent {\r\n   \r\n  backlCass = () => {\r\n    const { push } = this.props.history\r\n    push('/class')\r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <div>\r\n        <button className='back-myclass-btn' onClick={this.backlCass}>返回上一级</button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(BackClassBtn)","// import { func } from \"prop-types\";\r\n\r\n// 添加class\r\nfunction addClass(obj, cn) {\r\n  // 检查是否有cn\r\n  if (!hasClass(obj, cn)) {\r\n    obj.className += \" \" + cn\r\n  }\r\n}\r\n// 检查是否有cn\r\nfunction hasClass(obj, cn) {\r\n  const reg = new RegExp(\"\\\\b\" + cn + \"\\\\b\")\r\n  return reg.test(obj.className);\r\n}\r\n// 删除class\r\nfunction deleClass(obj, cn) {\r\n  // 查找是否存在\r\n  const reg1 = new RegExp(\"\\\\b\" + cn + \"\\\\b\", \"ig\");\r\n  // console.log(reg1);\r\n  //删除class\r\n  obj.className = obj.className.replace(reg1, \"\");\r\n}\r\n/*\r\n * toggleClass 可以用来切换一个类\r\n * \t如果元素中具有该类，则删除\r\n * \t如果元素中没有该类，则添加\r\n */\r\nfunction toggleClass(obj, cn) {\r\n  //判断obj中是否含有cn\r\n  if (hasClass(obj, cn)) {\r\n    //有，则删除\r\n    deleClass(obj, cn);\r\n  } else {\r\n    //没有，则添加\r\n    addClass(obj, cn);\r\n  }\r\n}\r\n\r\nexport {\r\n  addClass,\r\n  hasClass,\r\n  deleClass,\r\n  toggleClass\r\n}","import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport PubSub from 'pubsub-js'\r\n\r\nimport {\r\n  addClass,\r\n  deleClass,\r\n} from '../../../func/toggleClass'\r\nimport './css/index.css'\r\n\r\nexport default class SingbieBox extends PureComponent {\r\n\r\n\r\n  static propTypes = {\r\n    singleBoxName: PropTypes.string,//作为react-redux action 的 key\r\n    data: PropTypes.array,//单选框的选项\r\n\r\n  }\r\n  static defaultProps = {//设置prop的默认值\r\n    data: ['选项1', '选项2', '选项3', '选项4']\r\n  }\r\n\r\n  componentDidMount() {\r\n    // 订阅创建班级表单提交成功事件\r\n   this.token = PubSub.subscribe('initVuale', () => {\r\n      const date = this.props.data\r\n      date.map((value, index) => deleClass(this[index], 'single-box-foucs'))\r\n    })\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    // 取消订阅\r\n    PubSub.unsubscribe(this.token)\r\n  }\r\n  // 单选框点击回调\r\n  // 判断元素是否被点击，是则改变classnanme\r\n  singleBoxFocus = (index, arr) => {\r\n    const { props: { singleBoxName, singleBoxFocusValue } } = this\r\n    return () => {\r\n      arr.map((value, index1) => {\r\n        if (index1 === index) {\r\n          const data = { [singleBoxName]: value }\r\n          singleBoxFocusValue(data)\r\n          return addClass(this[index1], 'single-box-foucs')\r\n        } else {\r\n          return deleClass(this[index1], 'single-box-foucs')\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const date = this.props.data\r\n    return (\r\n      <div className=\"single-box\">\r\n        {\r\n          date.map((value, index, arr) => {\r\n            return <div onClick={this.singleBoxFocus(index, arr)} ref={e => this[index] = e} key={index}  ><span></span><a onClick={event => event.preventDefault()} href='/#'>{value}</a></div>\r\n          })\r\n        }\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { SINGLEBOXFOCUSVALUE } from '../counstant'\r\nexport function singleBoxFocusValue(data) {\r\n  return {\r\n    type: SINGLEBOXFOCUSVALUE,\r\n    data\r\n  }\r\n}","import { connect } from 'react-redux'\r\n\r\nimport SingleBox from '../../components/commom/SingleBox'\r\nimport { singleBoxFocusValue } from '../../redux/actions/singleBox'\r\n\r\nexport default connect(\r\n  state => ({\r\n    singleBox: state.SingleBox\r\n  }),\r\n  {\r\n    singleBoxFocusValue\r\n  })(SingleBox)","import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport PubSub from 'pubsub-js'\r\n\r\nimport {\r\n  addClass,\r\n  deleClass,\r\n  toggleClass\r\n} from '../../../func/toggleClass'\r\n\r\nimport './css/index.css'\r\n\r\nexport default class DropDowm extends PureComponent {\r\n\r\n  static propTypes = {\r\n    pubName: PropTypes.string,//pubsub 订阅-发布 的事件名\r\n    liValue: PropTypes.string,//作为react-redux action 的 key\r\n    data: PropTypes.array,//下拉列表，列表项的值，数组第一个为下拉列表的默认值\r\n\r\n  }\r\n  static defaultProps = {//设置prop的默认值\r\n    data: ['  &&选中的内容&&', '请传入', '一个数组', '作为', '列表项', '数组的第一个值为选中的内容']\r\n  }\r\n  state = {\r\n    title: '请选择年级',\r\n    lisHeightCount: 0\r\n  }\r\n\r\n  //生命周期函数 初始化 title\r\n  componentDidMount() {\r\n    const data = this.props.data\r\n    this.setState({ title: `请选择${data[0]}` })\r\n    // 订阅创建班级表单提交成功事件\r\n    this.token = PubSub.subscribe('initVuale', () => {\r\n      this.setState({ title: `请选择${data[0]}` })\r\n    })\r\n  }\r\n  componentWillUnmount() {\r\n    // 取消订阅\r\n    PubSub.unsubscribe(this.token)\r\n  }\r\n\r\n  // 点击 p 标签 展示 ul 下拉框\r\n  showDRopDowmList = (event) => {\r\n    const data = this.props.data\r\n    const { childNodes } = event.target\r\n    const { dropDowmList, state: { lisHeightCount } } = this\r\n    toggleClass(dropDowmList, 'dropdown-ul-active')\r\n    toggleClass(childNodes[1], 'dropdown-icon-active')\r\n    if (lisHeightCount === 0) {\r\n      this.setState({ lisHeightCount: 34 * (data.length - 1) })\r\n    } else {\r\n      this.setState({ lisHeightCount: 0 })\r\n\r\n    }\r\n  }\r\n\r\n  // 鼠标移入ul事件回调\r\n  onMouseEnterUl = () => {\r\n    const { dropDowmInpt: { childNodes }, timer } = this\r\n    clearTimeout(timer)\r\n    addClass(childNodes[1], 'dropdown-icon-active')\r\n\r\n  }\r\n  // 鼠标移出ul事件回调\r\n  mouseleaveUL = () => {\r\n    const { dropDowmInpt: { childNodes }, } = this\r\n\r\n    deleClass(childNodes[1], 'dropdown-icon-active')\r\n    this.setState({ lisHeightCount: 0 })\r\n\r\n  }\r\n  // 鼠标移出p事件回调\r\n  mouseleaveP = () => {\r\n    const { dropDowmInpt: { childNodes }, } = this\r\n\r\n    this.timer = setTimeout(() => {\r\n\r\n      deleClass(childNodes[1], 'dropdown-icon-active')\r\n      this.setState({ lisHeightCount: 0 })\r\n\r\n    }, 300);\r\n  }\r\n\r\n  // 点击li选定内容回调\r\n  showDRopDowmLi = (index) => {\r\n    const { props: { pubName, liValue, setDropDowmValue }, } = this\r\n    return () => {\r\n      const { dropDowmInpt: { childNodes }, } = this\r\n      const data = this.props.data\r\n      toggleClass(childNodes[1], 'dropdown-icon-active')\r\n      data.map((value, index1) => {\r\n        if (index1 === index) {\r\n          this.setState({ title: value }, () => {\r\n\r\n            if (!(pubName === undefined)) {\r\n              // 发布事件的名字由父元素传入\r\n              PubSub.publish(pubName, value)\r\n            }\r\n          })\r\n          this.setState({ lisHeightCount: 0 })\r\n          // 判断是否使用react-redux\r\n          if (!(liValue === undefined)) {\r\n\r\n            const resl = { [liValue]: value }\r\n            setDropDowmValue(resl)\r\n          }\r\n\r\n        }\r\n        return []\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const data = this.props.data\r\n    const { showDRopDowmLi, showDRopDowmList, state: { title, lisHeightCount }, mouseleaveUL, onMouseEnterUl, mouseleaveP } = this\r\n    return (\r\n      <div className=\"dropdown\">\r\n        <p onMouseLeave={mouseleaveP} ref={e => this.dropDowmInpt = e} onClick={showDRopDowmList}>{title}<span className='dropdown-icon'></span></p>\r\n        <ul onMouseEnter={onMouseEnterUl}\r\n          onMouseLeave={mouseleaveUL}\r\n          className='dropdown-ul'\r\n          ref={e => this.dropDowmList = e}\r\n          style={{ height: lisHeightCount }}\r\n        >\r\n          {\r\n            data.map((value, index) => {\r\n\r\n              return index !== 0 ? < li onClick={showDRopDowmLi(index)} key={index} > {value}</li> : ''\r\n            })\r\n          }\r\n\r\n        </ul>\r\n      </div >\r\n    )\r\n  }\r\n}\r\n","\r\nimport { SETDROPDOWMVALUE } from '../counstant'\r\nfunction setDropDowmValue(data) {\r\n  return {\r\n    type: SETDROPDOWMVALUE,\r\n    data\r\n  }\r\n}\r\nexport { setDropDowmValue }","import { connect } from 'react-redux'\r\n\r\nimport DropDowm from '../../components/commom/DropDowm'\r\nimport { setDropDowmValue } from '../../redux/actions/dropDowm'\r\n\r\nexport default connect(state => ({\r\n  dropDowm: state.dropDowm\r\n}), {\r\n  setDropDowmValue\r\n})(DropDowm)","import React, { PureComponent } from 'react'\r\nimport PubSub from 'pubsub-js'\r\n\r\nimport {\r\n  addClass,\r\n  deleClass,\r\n} from '../../../../func/toggleClass'\r\nimport BackClassBtn from '../../../../components/content/BackClassBtn'\r\nimport SingleBox from '../../../../containers/SingleBox'\r\nimport DropDowm from '../../../../containers/DropDowm'\r\nimport './css/index.css'\r\n\r\nexport default class CreateClass extends PureComponent {\r\n\r\n  state = {\r\n    newClass: { students: 0, headmaster: '田小雨', },\r\n    schoolIstrue: false,//学校inpt框输入内容是否合法\r\n    classIstrue: false,//课程inpt框输入内容是否合法\r\n    display: '',\r\n    width: '',\r\n    height: '',\r\n    hasError: ''\r\n  }\r\n\r\n  // ref 容器\r\n  schoolRef = React.createRef()\r\n  schoolChildRef = React.createRef()\r\n  classRef = React.createRef()\r\n  classChildRef = React.createRef()\r\n\r\n\r\n  //当子组件出现报错时候，会触发getDerivedStateFromError调用，并携带错误信息\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: error }\r\n  }\r\n\r\n  componentDidCatch() {\r\n    console.log('此处统计错误，反馈给服务器，用于通知编码人员进行bug的解决');\r\n  }\r\n\r\n\r\n  // school onChange的回调\r\n  schoolInptChange = () => {\r\n    const {\r\n      schoolRef,\r\n      schoolRef: { current: { value } },\r\n      schoolChildRef,\r\n      props: { setSchoolValue }\r\n\r\n    } = this\r\n    const reg = new RegExp('^[\\u4e00-\\u9fa5 ]{4,20}$|^[A-z ]{5,50}$', 'g')\r\n    let str = value\r\n    // 去除中间多余的空格\r\n    str = str.replace(/\\s{2,}/g, \" \")\r\n    // 去除首尾的空格\r\n    str = str.replace(/^\\s*|\\s*$/g, \"\")\r\n    // 纠正非法输入\r\n    schoolRef.current.value = str\r\n\r\n    const reslt = reg.test(str)\r\n    if (!Boolean(reslt)) {\r\n      // 显示输入错误提示\r\n      deleClass(schoolChildRef.current, 'school-true-tips')\r\n      deleClass(schoolChildRef.current, 'school-tips-hide')\r\n      setSchoolValue({ school: value })//表单验证 错误名称\r\n      // 更改旗帜\r\n      this.setState({ schoolIstrue: false })\r\n    } else {\r\n      // 显示正确图标\r\n      addClass(schoolChildRef.current, 'school-true-tips')\r\n\r\n      // 将数据保存在store\r\n      setSchoolValue({ school: value })\r\n      // 更改旗帜\r\n      this.setState({ schoolIstrue: true })\r\n\r\n    }\r\n  }\r\n  //class-name onChange的回调\r\n  classInptChange = () => {\r\n    const {\r\n      classRef, classRef: { current: { value } },\r\n      classChildRef,\r\n      props: { setClassValue }\r\n    } = this\r\n    const reg = /^[\\u4e00-\\u9fa5A-z0-9 ]{5,20}$/g\r\n    let str = value\r\n\r\n    // 去除中间多余的空格\r\n    str = str.replace(/\\s{2,}/g, \" \")\r\n    // 去除首尾的空格\r\n    str = str.replace(/^\\s*|\\s*$/g, \"\")\r\n    //去除_和%\r\n    str = str.replace(/[_%]/g, '')\r\n    // 纠正非法输入\r\n    classRef.current.value = str\r\n    const reslt = reg.test(str)\r\n    if (!reslt) {\r\n      // 显示输入错误提示\r\n      deleClass(classChildRef.current, 'course-tips-true')\r\n      deleClass(classChildRef.current, 'course-tips-hide')\r\n      setClassValue({ course: value })//表单验证 错误名称\r\n      this.setState({ classIstrue: false })\r\n    } else {  \r\n      // 显示正确图标\r\n      addClass(classChildRef.current, 'course-tips-true')\r\n      setClassValue({ course: value })\r\n      this.setState({ classIstrue: true })\r\n    }\r\n  }\r\n\r\n  // 点击保存按钮的回调\r\n  saveData = (e) => {\r\n    // 取消按钮默认点击事件\r\n    e.preventDefault()\r\n    const {\r\n      props: {\r\n        createClass,\r\n        dropDowm,\r\n        dropDowm: { section, grade },\r\n        singleBox, singleBox: { classType, exitPermissions },\r\n        setDropDowmValue,\r\n        singleBoxFocusValue\r\n      },\r\n      state: { newClass, schoolIstrue, classIstrue },\r\n      schoolRef,\r\n      classRef,\r\n      schoolChildRef,\r\n      classChildRef,\r\n\r\n    } = this\r\n\r\n    const resl = { ...newClass, ...createClass, ...singleBox, ...dropDowm }\r\n    this.setState({ newClass: resl }, () => {\r\n\r\n      console.log(classType);\r\n      console.log(grade);\r\n      // 表单验证\r\n      if (!schoolIstrue) {\r\n        alert(`学校名称不正确,请重新输入`)\r\n      } else if (section === undefined||section === '') {\r\n        alert('请选择学段')\r\n      } else if (grade === undefined || grade === '') {\r\n        alert('请选择年级')\r\n      } else if (!classIstrue) {\r\n        alert(`班级名称不正确,请重新输入`)\r\n      } else if (classType === undefined||classType === '') {\r\n        alert('请选择班级类型')\r\n      } else if (exitPermissions === undefined||exitPermissions === '') {\r\n        alert('退出权限未设置')\r\n      } else {\r\n\r\n        // 发布数据给 class 页面 \r\n        PubSub.publish('createClass', this.state.newClass)\r\n\r\n        // 初始化输入框\r\n        schoolRef.current.value = ''\r\n        classRef.current.value = ''\r\n        // 初始化下拉框\r\n        setDropDowmValue({\r\n          section: '',\r\n          grade: ''\r\n        })\r\n        // 初始化啊单选框\r\n        singleBoxFocusValue({\r\n          classType: '',\r\n          exitPermissions: ''\r\n        })\r\n        \r\n        // 通知DropDowm和singBox初始化状态\r\n        PubSub.publish('initVuale')\r\n\r\n        // 初始化tips\r\n        addClass(classChildRef.current, 'course-tips-hide')\r\n        addClass(schoolChildRef.current, 'school-tips-hide')\r\n\r\n\r\n        // 显示成功添加弹框\r\n        this.setState({ display: \"block\" })\r\n        this.setState({ schoolIstrue: false })\r\n        this.setState({ classIstrue: false })\r\n        // 动态设置弹窗位置\r\n        this.timer = setInterval(() => {\r\n          this.setState({ width: e.view.innerWidth })\r\n          this.setState({ height: e.view.innerHeight })\r\n        }, 100);\r\n\r\n      }\r\n\r\n\r\n    })\r\n\r\n  }\r\n\r\n  // 弹窗返回我的班级回调\r\n  backlCass = (e) => {\r\n    e.preventDefault()\r\n    const { push } = this.props.history\r\n    push('/class')\r\n\r\n    // 停止计时器\r\n    clearInterval(this.timer)\r\n  }\r\n\r\n  // 弹窗继续添加回调\r\n  continueClick = (e) => {\r\n    // 取消默认行为\r\n    e.preventDefault()\r\n    // 影藏弹窗\r\n    this.setState({ display: 'none' })\r\n\r\n\r\n    // 停止计时器\r\n    clearInterval(this.timer)\r\n\r\n  }\r\n\r\n  render() {\r\n\r\n    const classType = ['行政班', '教学班']\r\n    const exitPermissions = ['允许退出', '通知班级管理员审核后退出', '禁止退出']\r\n    const grade = ['年级', '一年级', '二年级', '三年级', '四年级']\r\n    const section = ['学段', '小学', '初中', '高中', '大学']\r\n    const { saveData, classInptChange, schoolInptChange, backlCass, continueClick, state: { display, width, height } } = this\r\n    return (\r\n      <div>\r\n        <div className='class-create-totabar'>\r\n          {/* 顶部导航 */}\r\n          <div className=\"contenter-top-nav-bar\">\r\n            <div className=\"route-title\">\r\n              <h2 >我的班级</h2>\r\n            </div>\r\n            {/* <button className='creat-class'>创建班级</button> */}\r\n            <BackClassBtn />\r\n          </div>\r\n\r\n          <div className=\"class-create-bar\">\r\n            <p className='create-tip'>尊敬的<span>老师(刘老师)</span>，请填写班级信息：</p>\r\n            <form action=\"\">\r\n\r\n              {/* 输入学校 */}\r\n              <div className='school'>\r\n                <i>学校</i><input ref={this.schoolRef} onChange={schoolInptChange} type=\"text\" placeholder='请选择学校' />\r\n                <div ref={this.schoolChildRef} className='school-tips  school-tips-hide '><div></div><p>请输入4-20位的中文或者5-50位的字母</p></div>\r\n              </div>\r\n\r\n              {/* 选择选段 */}\r\n              <div className=\"section\">\r\n                <i><span>*</span>学段</i>\r\n                {\r\n                  this.state.hasError ? <h2>当前网络不稳定，稍后再试</h2> : <DropDowm data={section} pubName='sectionValue' liValue='section' />\r\n                }\r\n\r\n              </div>\r\n\r\n              {/* 选择年级 */}\r\n              <div className=\"grade\">\r\n                <i><span>*</span>年级</i>\r\n                {\r\n                  this.state.hasError ? <h2>当前网络不稳定，稍后再试</h2> : <DropDowm data={grade} pubName='gradeValue' liValue='grade' />\r\n                }\r\n\r\n              </div>\r\n\r\n              {/* 输入班级名 */}\r\n              <div className='class-name'>\r\n                <i><span>*</span>班级名</i><input onChange={classInptChange} ref={this.classRef} type=\"text\" name=\"\" id=\"\" placeholder='请输入班级名称，限20字符，不支持输入_和%' />\r\n                <div ref={this.classChildRef} className='course-tips  course-tips-hide'><div></div><p>限20字符，不支持输入_和%' </p></div>\r\n              </div>\r\n\r\n              {/* 选择类型 */}\r\n              <div className='class-type'>\r\n                <i>类型</i>\r\n                {\r\n                  this.state.hasError ? <h2>当前网络不稳定，稍后再试</h2> : <SingleBox data={classType} singleBoxName='classType' />\r\n                }\r\n\r\n              </div>\r\n\r\n              {/* 退出权限设置 */}\r\n              <div className='exit-permissions'>\r\n                <i>退出权限设置</i>\r\n                {\r\n                  this.state.hasError ? <h2>当前网络不稳定，稍后再试</h2> : <SingleBox data={exitPermissions} singleBoxName='exitPermissions' />\r\n                }\r\n\r\n\r\n              </div>\r\n              {/* 保存按钮 */}\r\n              <button onClick={saveData}>保存</button>\r\n\r\n\r\n            </form>\r\n            <div className=\"confirm-Window\" style={{ display, width, height }}>\r\n              <div className=\"confirm-body\" >\r\n                <div className=\"confirm-content\">添加班级成功！！！</div>\r\n                <div className=\"btns\">\r\n                  <a onClick={backlCass} href=\"/\" className=\"btn-back\" >返回我的班级</a>\r\n                  <a onClick={continueClick} href=\"/\" className=\"btn-continue\"  >继续添加</a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { connect } from 'react-redux'\r\n\r\nimport Create from '../../page/Set/Class/Create'\r\nimport { setSchoolValue, setClassValue } from '../../redux/actions/createClass'\r\nimport {setDropDowmValue} from '../../redux/actions/dropDowm'\r\nimport {singleBoxFocusValue} from '../../redux/actions/singleBox'\r\nexport default connect(state => ({\r\n  createClass: state.createClass,\r\n  dropDowm: state.dropDowm,\r\n  singleBox: state.singleBox\r\n}), {\r\n  setSchoolValue,\r\n  setClassValue,\r\n  setDropDowmValue,\r\n  singleBoxFocusValue\r\n\r\n})(Create)\r\n","/* \r\n  该文件专门为createClass组件生成action对象\r\n*/\r\nimport { SETSCHOOL } from '../counstant'\r\nexport const setSchoolValue = (data) => {\r\n  return {\r\n    type: SETSCHOOL,\r\n    data\r\n  }\r\n}\r\nexport const setClassValue = (data) => {\r\n  return {\r\n    type: 'setClass',\r\n    data\r\n  }\r\n}"],"sourceRoot":""}