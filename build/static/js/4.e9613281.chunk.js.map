{"version":3,"sources":["redux/actions/classSynopsis.js","network/request.js","components/content/ClassSynopsis/index.jsx","components/content/BackClassBtn/index.jsx","page/Set/Class/Detail/index.jsx","containers/Detail/index.jsx","func/toggleClass.js","components/commom/SingleBox/index.jsx","containers/SingleBox/index.jsx","redux/actions/singleBox.js","components/commom/DropDowm/index.jsx","containers/DropDowm/index.jsx","redux/actions/dropDowm.js","page/Set/Class/Create/index.jsx","containers/Create/index.jsx","redux/actions/createClass.js","page/Set/Class/index.jsx"],"names":["putClassMember","data","type","CLASSDETAIL","request","config","instance","axios","create","baseURL","timeout","interceptors","use","err","console","log","response","res","ClassSynopsis","state","students","teachers","parents","id","this","props","method","url","then","setState","section","grade","headmaster","classType","onClick","showClassMenber","className","style","fontWeight","length","PureComponent","BackClassBtn","backlCass","push","history","withRouter","Teachers","lazy","Studens","Parents","ClassDetail","putMessageClick","setTimeout","PubSub","publish","searchBtnClick","classMember","fuzzysearch","putStr","array","arrayStr","Arr","filter","obj","JSON","stringify","indexOf","serachInpt","value","RegExp","test","enterKeyUp","e","keyCode","match","params","catch","ref","onKeyUp","placeholder","to","activeClassName","fallback","Loading","path","component","connect","dispatch","Detail","addClass","cn","hasClass","deleClass","reg1","replace","toggleClass","SingbieBox","singleBoxFocus","index","arr","singleBoxName","singleBoxFocusValue","map","index1","date","event","preventDefault","href","singleBox","SingleBox","SINGLEBOXFOCUSVALUE","DropDowm","title","lisHeightCount","showDRopDowmList","childNodes","target","dropDowmList","onMouseEnterUl","dropDowmInpt","timer","clearTimeout","mouseleaveUL","mouseleaveP","showDRopDowmLi","pubName","liValue","setDropDowmValue","undefined","resl","onMouseLeave","onMouseEnter","height","defaultProps","dropDowm","SETDROPDOWMVALUE","CreateClass","newClass","schoolIstrue","classIstrue","display","width","hasError","schoolRef","React","createRef","schoolChildRef","classRef","classChildRef","schoolInptChange","current","setSchoolValue","reg","str","reslt","Boolean","school","classInptChange","setClassValue","course","saveData","createClass","exitPermissions","alert","setInterval","view","innerWidth","innerHeight","clearInterval","continueClick","action","onChange","name","error","SETSCHOOL","Create","MyClass","classes","getClassse","createClassToken","subscribe","a","unsubscribe","classesObj"],"mappings":"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","file":"static/js/4.e9613281.chunk.js","sourcesContent":["import { CLASSDETAIL } from '../counstant'\r\nexport function putClassMember(data) {\r\n  return {\r\n    type: CLASSDETAIL,\r\n    data\r\n  }\r\n}","import axios from 'axios'\r\n\r\n\r\n// {//config 的参数\r\n//   //请求类型\r\n//   method: 'POST',\r\n//     //URL\r\n//   url: 'http://localhost:3001',\r\n//       //设置请求体\r\n//   data: {\r\n//     title: \"今天天气不错, 还挺风和日丽的\",\r\n//       author: \"张三\"\r\n//   }\r\nexport function request(config) {\r\n\r\n  // 1.创建axios的实例对象\r\n  const instance = axios.create({\r\n    baseURL: 'http://localhost:3001',\r\n    timeout: 5000\r\n  })\r\n\r\n  // 2.axios 的拦截器\r\n  // 2.1.请求拦截的作用\r\n  instance.interceptors.request.use(\r\n    config => {\r\n      // 拦截之后必须将结果返回\r\n      return config\r\n    },\r\n    err => {\r\n      console.log(err);\r\n    })\r\n\r\n  // 2.2.响应拦截\r\n  instance.interceptors.response.use(\r\n    res => {\r\n      // console.log(res);\r\n      // 只需要将data放回即可 \r\n      return res.data\r\n    },\r\n    err => {\r\n      console.log(err);\r\n    })\r\n\r\n  // 3.发送真正的网络请求\r\n  return instance(config)//本身(源码)就是一个 promise 所以可以用then catch\r\n\r\n\r\n}","import React, { PureComponent } from 'react'\r\nimport { request } from '../../../network/request'\r\nimport './css/index.css'\r\nexport default class ClassSynopsis extends PureComponent {\r\n\r\n  state = {\r\n    students: [],\r\n    teachers: [],\r\n    parents: []\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    const id = this.props.id\r\n    request({\r\n      method: 'GET',\r\n      url: `/classes/${id}/students`,\r\n    }).then(res => {\r\n      // console.log(res);\r\n      this.setState({ students: res })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { students } = this.state\r\n    const { section, grade, headmaster, classType } = this.props\r\n    return (\r\n      <div onClick={this.showClassMenber} className=\"class-details\">\r\n        <div className='course-logo'></div>\r\n        <div className=\"class-detail\">\r\n          <p>{section}</p>\r\n          <p><i>年级：</i><span>{grade}</span></p>\r\n          <p><i>班主任：</i><span style={{ fontWeight: 'bold' }}>{headmaster}</span></p>\r\n          <p><i>学生：</i><span>{students.length || 0}人</span></p>\r\n        </div>\r\n        <button className='class-details-btn'>{classType}</button>\r\n        <div className='class-detail-setting'></div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react'\r\n\r\nimport {withRouter} from 'react-router-dom'\r\n\r\nimport './css/index.css'\r\n class BackClassBtn extends PureComponent {\r\n   \r\n  backlCass = () => {\r\n    const { push } = this.props.history\r\n    push('/class')\r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <div>\r\n        <button className='back-myclass-btn' onClick={this.backlCass}>返回上一级</button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(BackClassBtn)","import React, { PureComponent, lazy, Suspense } from 'react'\r\nimport { NavLink, Route, Switch, Redirect } from 'react-router-dom'\r\nimport PubSub from 'pubsub-js'\r\n\r\nimport { request } from '../../../../network/request'\r\n\r\nimport BackClassBtn from '../../../../components/content/BackClassBtn'\r\nimport './css/index.css'\r\n\r\nimport Loading from '../../../Loading'\r\nconst Teachers = lazy(() => import('../../../../containers/Detail/Teachers'))\r\nconst Studens = lazy(() => import('../../../../page/Set/Class/Detail/Studens'))\r\nconst Parents = lazy(() => import('../../../../page/Set/Class/Detail/Parents'))\r\nexport default class ClassDetail extends PureComponent {\r\n\r\n  state = {\r\n    students: [],\r\n    teachers: [],\r\n    parents: []\r\n  }\r\n\r\n  componentDidMount() {\r\n    const {\r\n      props: { match: { params: { id } }, putClassMember },\r\n    } = this\r\n\r\n    // axios异步数据请求\r\n    request({\r\n      method: 'GET',\r\n      url: `/classes/${id}/students`\r\n    }).then(res => {\r\n      this.setState({ students: res })\r\n      putClassMember({ students: res })\r\n      request({\r\n        method: 'GET',\r\n        url: `/classes/${id}/teachers`\r\n      }).then(res => {\r\n        this.setState({ teachers: res })\r\n        putClassMember({ teachers: res })\r\n        request({\r\n          method: 'GET',\r\n          url: `/classes/${id}/parents`\r\n        }).then(res => {\r\n          putClassMember({ parents: res })\r\n          this.setState({ parents: res }, () => {\r\n            this.putMessageClick()\r\n          })\r\n        })\r\n      })\r\n    }).catch(err => { console.log(err) })\r\n  }\r\n\r\n\r\n  // 模糊搜索的回调\r\n  putMessageClick = () => {\r\n    const {\r\n      state: {\r\n        parents,\r\n        students,\r\n        teachers\r\n      }\r\n    } = this\r\n\r\n    setTimeout(() => {\r\n      PubSub.publish('pubParents', parents)\r\n      PubSub.publish('pubStudents', students)\r\n      PubSub.publish('pubTeachers', teachers)\r\n    }, 100);\r\n\r\n  }\r\n\r\n  // 搜索按钮点击回调\r\n  searchBtnClick = () => {\r\n    const {\r\n      props: {\r\n        classMember: { students, parents, teachers }\r\n      },\r\n      fuzzysearch\r\n    } = this\r\n\r\n    fuzzysearch(\"pubTeachers\", teachers, 'teachers')\r\n    fuzzysearch(\"pubStudents\", students, 'students')\r\n    fuzzysearch(\"pubParents\", parents, 'parents')\r\n  }\r\n\r\n  // 模糊搜索、全拼和首写函数\r\n  fuzzysearch = (putStr, array, arrayStr) => {\r\n    const Arr = array.filter(obj => JSON.stringify(obj).indexOf(this.serachInpt.value) > -1) ||\r\n      array.filter((obj) => {\r\n        const reg = new RegExp(`[${this.serachInpt.value}]`, 'g')\r\n        return reg.test(JSON.stringify(obj))\r\n      })\r\n    this.setState({ [arrayStr]: Arr })\r\n    PubSub.publish(putStr, Arr)\r\n  }\r\n\r\n  // 点击enter松开回调\r\n  enterKeyUp = (e) => {\r\n    if (e.keyCode === 13) {\r\n      this.searchBtnClick()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    //解构赋值 \r\n    const { state: { parents, teachers, students }, searchBtnClick, enterKeyUp } = this\r\n    const { id } = this.props.match.params\r\n    return (\r\n      <div className='class-detail-totabar'>\r\n        {/* 顶部导航 */}\r\n        <div className=\"contenter-top-nav-bar\">\r\n          <div className=\"route-title\">\r\n            <h2 >我的班级</h2>\r\n          </div>\r\n          {/* 返回上一级按钮 */}\r\n          <BackClassBtn></BackClassBtn>\r\n\r\n        </div>\r\n        {/* 班级信息搜索框 */}\r\n        <div className=\"class-metail-search-bar\">\r\n          <h3>兴趣折纸班</h3>\r\n          <div className='class-metail-search'>\r\n            <input ref={e => this.serachInpt = e} onKeyUp={enterKeyUp} type=\"text\" placeholder='快捷查找' /><button onClick={searchBtnClick} ></button>\r\n          </div>\r\n        </div>\r\n        {/* 班级详细信息容器 */}\r\n        <div className=\"class-detail-bar\">\r\n          {/* 班级详细信息导航栏 */}\r\n          {/* activeClassName=\"class-detail-li-active\" */}\r\n          <ul className=\"class-detail-nav-bar\">\r\n            <NavLink to={`/class/${id}/teacher`} activeClassName=\"class-detail-li-active\"><li onClick={this.putMessageClick} >所有老师 ({teachers.length} )</li></NavLink>\r\n            <NavLink to={`/class/${id}/studens`} activeClassName=\"class-detail-li-active\"><li onClick={this.putMessageClick}>所有学生 ({students.length} )</li></NavLink>\r\n            <NavLink to={`/class/${id}/parents`} activeClassName=\"class-detail-li-active\"><li onClick={this.putMessageClick}>所有家长 ( {parents.length} )</li></NavLink>\r\n          </ul>\r\n          {/* 路由懒加载 */}\r\n          <Suspense fallback={<Loading></Loading>}>\r\n            <Switch>\r\n              <Route path={`/class/:id/teacher`} component={Teachers} ></Route>\r\n              <Route path={`/class/:id/studens`} component={Studens}></Route>\r\n              <Route path={`/class/:id/parents`} component={Parents}></Route>\r\n              <Redirect to={`/class/${id}/teacher`} />\r\n            </Switch>\r\n          </Suspense>\r\n\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { connect } from 'react-redux'\r\nimport Detail from '../../page/Set/Class/Detail'\r\nimport { putClassMember } from '../../redux/actions/classSynopsis'\r\n\r\nfunction a(state) {\r\n  return {\r\n    classMember: state.classMember\r\n  }\r\n}\r\nfunction b(dispatch) {\r\n  // console.log('111');\r\n  return {\r\n    putClassMember: (data) => { dispatch(putClassMember(data)) }\r\n  }\r\n}\r\n\r\nexport default connect(a, b)(Detail)","// import { func } from \"prop-types\";\r\n\r\n// 添加class\r\nfunction addClass(obj, cn) {\r\n  // 检查是否有cn\r\n  if (!hasClass(obj, cn)) {\r\n    obj.className += \" \" + cn\r\n  }\r\n}\r\n// 检查是否有cn\r\nfunction hasClass(obj, cn) {\r\n  const reg = new RegExp(\"\\\\b\" + cn + \"\\\\b\")\r\n  return reg.test(obj.className);\r\n}\r\n// 删除class\r\nfunction deleClass(obj, cn) {\r\n  // 查找是否存在\r\n  const reg1 = new RegExp(\"\\\\b\" + cn + \"\\\\b\", \"ig\");\r\n  // console.log(reg1);\r\n  //删除class\r\n  obj.className = obj.className.replace(reg1, \"\");\r\n}\r\n/*\r\n * toggleClass 可以用来切换一个类\r\n * \t如果元素中具有该类，则删除\r\n * \t如果元素中没有该类，则添加\r\n */\r\nfunction toggleClass(obj, cn) {\r\n  //判断obj中是否含有cn\r\n  if (hasClass(obj, cn)) {\r\n    //有，则删除\r\n    deleClass(obj, cn);\r\n  } else {\r\n    //没有，则添加\r\n    addClass(obj, cn);\r\n  }\r\n}\r\n\r\nexport {\r\n  addClass,\r\n  hasClass,\r\n  deleClass,\r\n  toggleClass\r\n}","import React, { PureComponent } from 'react'\r\n\r\nimport {\r\n  addClass,\r\n  deleClass,\r\n} from '../../../func/toggleClass'\r\nimport './css/index.css'\r\n\r\nexport default class SingbieBox extends PureComponent {\r\n\r\n  // 单选框点击回调\r\n  // 判断元素是否被点击，是则改变classnanme\r\n  singleBoxFocus = (index, arr) => {\r\n    const { props: { singleBoxName, singleBoxFocusValue } } = this\r\n    return () => {\r\n      arr.map((value, index1) => {\r\n        if (index1 === index) {\r\n          const data = { [singleBoxName]: value }\r\n          singleBoxFocusValue(data)\r\n          return addClass(this[index1], 'single-box-foucs')\r\n        } else {\r\n          return deleClass(this[index1], 'single-box-foucs')\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const date = this.props.data\r\n    return (\r\n      <div className=\"single-box\">\r\n        {\r\n          date.map((value, index, arr) => {\r\n            return <div onClick={this.singleBoxFocus(index, arr)} ref={e => this[index] = e} key={index}  ><span></span><a onClick={event => event.preventDefault()} href='/#'>{value}</a></div>\r\n          })\r\n        }\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { connect } from 'react-redux'\r\n\r\nimport SingleBox from '../../components/commom/SingleBox'\r\nimport { singleBoxFocusValue } from '../../redux/actions/singleBox'\r\n\r\nexport default connect(\r\n  state => ({\r\n    singleBox: state.SingleBox\r\n  }),\r\n  {\r\n    singleBoxFocusValue\r\n  })(SingleBox)","import { SINGLEBOXFOCUSVALUE } from '../counstant'\r\nexport function singleBoxFocusValue(data) {\r\n  return {\r\n    type: SINGLEBOXFOCUSVALUE,\r\n    data\r\n  }\r\n}","import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport PubSub from 'pubsub-js'\r\n\r\nimport {\r\n  addClass,\r\n  deleClass,\r\n  toggleClass\r\n} from '../../../func/toggleClass'\r\n\r\nimport './css/index.css'\r\n\r\nexport default class DropDowm extends PureComponent {\r\n\r\n  static propTypes = {\r\n    pubName: PropTypes.string,//pubsub 订阅-发布 的事件名\r\n    liValue: PropTypes.string,//作为react-redux action 的 key\r\n    data: PropTypes.array,//下拉列表，列表项的值，数组第一个为下拉列表的默认值\r\n\r\n  }\r\n  static defaultProps = {//设置prop的默认值\r\n    data: ['  &&选中的内容&&', '请传入', '一个数组', '作为', '列表项', '数组的第一个值为选中的内容']\r\n  }\r\n  state = {\r\n    title: '请选择年级',\r\n    lisHeightCount: 0\r\n  }\r\n\r\n  //生命周期函数 初始化 title\r\n  componentDidMount() {\r\n    const data = this.props.data \r\n    this.setState({ title: `请选择${data[0]}` })\r\n  }\r\n\r\n  // 点击 p 标签 展示 ul 下拉框\r\n  showDRopDowmList = (event) => {\r\n    const data = this.props.data \r\n    const { childNodes } = event.target\r\n    const { dropDowmList, state: { lisHeightCount } } = this\r\n    toggleClass(dropDowmList, 'dropdown-ul-active')\r\n    toggleClass(childNodes[1], 'dropdown-icon-active')\r\n    if (lisHeightCount === 0) {\r\n      this.setState({ lisHeightCount: 34 * (data.length - 1) })\r\n    } else {\r\n      this.setState({ lisHeightCount: 0 })\r\n\r\n    }\r\n  }\r\n\r\n  // 鼠标移入ul事件回调\r\n  onMouseEnterUl = () => {\r\n    const { dropDowmInpt: { childNodes }, timer } = this\r\n    clearTimeout(timer)\r\n    addClass(childNodes[1], 'dropdown-icon-active')\r\n\r\n  }\r\n  // 鼠标移出ul事件回调\r\n  mouseleaveUL = () => {\r\n    const { dropDowmInpt: { childNodes }, } = this\r\n\r\n    deleClass(childNodes[1], 'dropdown-icon-active')\r\n    this.setState({ lisHeightCount: 0 })\r\n\r\n  }\r\n  // 鼠标移出p事件回调\r\n  mouseleaveP = () => {\r\n    const { dropDowmInpt: { childNodes }, } = this\r\n\r\n    this.timer = setTimeout(() => {\r\n\r\n      deleClass(childNodes[1], 'dropdown-icon-active')\r\n      this.setState({ lisHeightCount: 0 })\r\n\r\n    }, 300);\r\n  }\r\n\r\n  // 点击li选定内容回调\r\n  showDRopDowmLi = (index) => {\r\n    const { props: { pubName, liValue, setDropDowmValue }, } = this\r\n    return () => {\r\n      const { dropDowmInpt: { childNodes }, } = this\r\n      const data = this.props.data\r\n      toggleClass(childNodes[1], 'dropdown-icon-active')\r\n      data.map((value, index1) => {\r\n        if (index1 === index) {\r\n          this.setState({ title: value }, () => {\r\n\r\n            if (!(pubName === undefined)) {\r\n              // 发布事件的名字由父元素传入\r\n              PubSub.publish(pubName, value)\r\n            }\r\n          })\r\n          this.setState({ lisHeightCount: 0 })\r\n          // 判断是否使用react-redux\r\n          if (!(liValue === undefined)) {\r\n\r\n            const resl = { [liValue]: value }\r\n            setDropDowmValue(resl)\r\n          }\r\n\r\n        }\r\n        return []\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const data = this.props.data \r\n    const { showDRopDowmLi, showDRopDowmList, state: { title, lisHeightCount }, mouseleaveUL, onMouseEnterUl, mouseleaveP } = this\r\n    return (\r\n      <div className=\"dropdown\">\r\n        <p onMouseLeave={mouseleaveP} ref={e => this.dropDowmInpt = e} onClick={showDRopDowmList}>{title}<span className='dropdown-icon'></span></p>\r\n        <ul onMouseEnter={onMouseEnterUl}\r\n          onMouseLeave={mouseleaveUL}\r\n          className='dropdown-ul'\r\n          ref={e => this.dropDowmList = e}\r\n          style={{ height: lisHeightCount }}\r\n        >\r\n          {\r\n            data.map((value, index) => {\r\n\r\n              return index !== 0 ? < li onClick={showDRopDowmLi(index)} key={index} > {value}</li> : ''\r\n            })\r\n          }\r\n\r\n        </ul>\r\n      </div >\r\n    )\r\n  }\r\n}\r\n","import { connect } from 'react-redux'\r\n\r\nimport DropDowm from '../../components/commom/DropDowm'\r\nimport { setDropDowmValue } from '../../redux/actions/dropDowm'\r\n\r\nexport default connect(state => ({\r\n  dropDowm: state.dropDowm\r\n}), {\r\n  setDropDowmValue\r\n})(DropDowm)","\r\nimport { SETDROPDOWMVALUE } from '../counstant'\r\nfunction setDropDowmValue(data) {\r\n  return {\r\n    type: SETDROPDOWMVALUE,\r\n    data\r\n  }\r\n}\r\nexport { setDropDowmValue }","import React, { PureComponent } from 'react'\r\nimport PubSub from 'pubsub-js'\r\n\r\nimport {\r\n  addClass,\r\n  deleClass,\r\n} from '../../../../func/toggleClass'\r\nimport BackClassBtn from '../../../../components/content/BackClassBtn'\r\nimport SingleBox from '../../../../containers/SingleBox'\r\nimport DropDowm from '../../../../containers/DropDowm'\r\nimport './css/index.css'\r\n\r\nexport default class CreateClass extends PureComponent {\r\n\r\n  state = {\r\n    newClass: { students: 0, headmaster: '田小雨', },\r\n    schoolIstrue: false,//学校inpt框输入内容是否合法\r\n    classIstrue: false,//课程inpt框输入内容是否合法\r\n    display: '',\r\n    width: '',\r\n    height: '',\r\n    hasError: ''\r\n  }\r\n\r\n  // ref 容器\r\n  schoolRef = React.createRef()\r\n  schoolChildRef = React.createRef()\r\n  classRef = React.createRef()\r\n  classChildRef = React.createRef()\r\n\r\n\r\n  //当子组件出现报错时候，会触发getDerivedStateFromError调用，并携带错误信息\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: error }\r\n  }\r\n\r\n  componentDidCatch() {\r\n    console.log('此处统计错误，反馈给服务器，用于通知编码人员进行bug的解决');\r\n  }\r\n\r\n\r\n  // school onChange的回调\r\n  schoolInptChange = () => {\r\n    const {\r\n      schoolRef,\r\n      schoolRef: { current: { value } },\r\n      schoolChildRef,\r\n      props: { setSchoolValue }\r\n\r\n    } = this\r\n    const reg = new RegExp('^[\\u4e00-\\u9fa5 ]{4,20}$|^[A-z ]{5,50}$', 'g')\r\n    let str = value\r\n    // 去除中间多余的空格\r\n    str = str.replace(/\\s{2,}/g, \" \")\r\n    // 去除首尾的空格\r\n    str = str.replace(/^\\s*|\\s*$/g, \"\")\r\n    // 纠正非法输入\r\n    schoolRef.current.value = str\r\n\r\n    const reslt = reg.test(str)\r\n    if (!Boolean(reslt)) {\r\n      // 显示输入错误提示\r\n      deleClass(schoolChildRef.current, 'school-true-tips')\r\n      deleClass(schoolChildRef.current, 'school-tips-hide')\r\n      setSchoolValue({ school: value })//表单验证 错误名称\r\n      // 更改旗帜\r\n      this.setState({ schoolIstrue: false })\r\n    } else {\r\n      // 显示正确图标\r\n      addClass(schoolChildRef.current, 'school-true-tips')\r\n\r\n      // 将数据保存在store\r\n      setSchoolValue({ school: value })\r\n      // 更改旗帜\r\n      this.setState({ schoolIstrue: true })\r\n\r\n    }\r\n  }\r\n  //class-name onChange的回调\r\n  classInptChange = () => {\r\n    const {\r\n      classRef, classRef: { current: { value } },\r\n      classChildRef,\r\n      props: { setClassValue }\r\n    } = this\r\n    const reg = /^[\\u4e00-\\u9fa5A-z0-9 ]{5,20}$/g\r\n    let str = value\r\n\r\n    // 去除中间多余的空格\r\n    str = str.replace(/\\s{2,}/g, \" \")\r\n    // 去除首尾的空格\r\n    str = str.replace(/^\\s*|\\s*$/g, \"\")\r\n    //去除_和%\r\n    str = str.replace(/[_%]/g, '')\r\n    // 纠正非法输入\r\n    classRef.current.value = str\r\n    const reslt = reg.test(str)\r\n    if (!reslt) {\r\n      // 显示输入错误提示\r\n      deleClass(classChildRef.current, 'course-tips-true')\r\n      deleClass(classChildRef.current, 'course-tips-hide')\r\n      setClassValue({ course: value })//表单验证 错误名称\r\n      this.setState({ classIstrue: false })\r\n    } else {\r\n      // 显示正确图标\r\n      addClass(classChildRef.current, 'course-tips-true')\r\n      setClassValue({ course: value })\r\n      this.setState({ classIstrue: true })\r\n    }\r\n  }\r\n\r\n  // 点击保存按钮的回调\r\n  saveData = (e) => {\r\n    // 取消按钮默认点击事件\r\n    e.preventDefault()\r\n    const {\r\n      props: {\r\n        createClass,\r\n        dropDowm,\r\n        dropDowm: { section, grade },\r\n        singleBox, singleBox: { classType, exitPermissions },\r\n\r\n      },\r\n      state: { newClass, schoolIstrue, classIstrue },\r\n      schoolRef,\r\n      classRef,\r\n      schoolChildRef,\r\n      classChildRef,\r\n\r\n    } = this\r\n\r\n    const resl = { ...newClass, ...createClass, ...singleBox, ...dropDowm }\r\n    this.setState({ newClass: resl }, () => {\r\n\r\n      // 表单验证\r\n      if (!schoolIstrue) {\r\n        alert(`学校名称不正确,请重新输入`)\r\n      } else if (section === undefined) {\r\n        alert('请选择学段')\r\n      } else if (grade === undefined) {\r\n        alert('请选择年级')\r\n      } else if (!classIstrue) {\r\n        alert(`班级名称不正确,请重新输入`)\r\n      } else if (classType === undefined) {\r\n        alert('请选择班级类型')\r\n      } else if (exitPermissions === undefined) {\r\n        alert('退出权限未设置')\r\n      } else {\r\n\r\n        // 发布数据给 class 页面 \r\n        PubSub.publish('createClass', this.state.newClass)\r\n\r\n        // 初始化输入框\r\n        schoolRef.current.value = ''\r\n        classRef.current.value = ''\r\n\r\n        // 初始化tips\r\n        addClass(classChildRef.current, 'course-tips-hide')\r\n        addClass(schoolChildRef.current, 'school-tips-hide')\r\n        // 显示成功添加弹框\r\n        this.setState({ display: \"block\" })\r\n        this.setState({ schoolIstrue: false })\r\n        this.setState({ classIstrue: false })\r\n        // 动态设置弹窗位置\r\n        this.timer = setInterval(() => {\r\n          this.setState({ width: e.view.innerWidth })\r\n          this.setState({ height: e.view.innerHeight })\r\n        }, 100);\r\n\r\n      }\r\n\r\n\r\n    })\r\n\r\n  }\r\n\r\n  // 弹窗返回我的班级回调\r\n  backlCass = (e) => {\r\n    e.preventDefault()\r\n    const { push } = this.props.history\r\n    push('/class')\r\n\r\n    // 停止计时器\r\n    clearInterval(this.timer)\r\n  }\r\n\r\n  // 弹窗继续添加回调\r\n  continueClick = (e) => {\r\n    // 取消默认行为\r\n    e.preventDefault()\r\n    // 影藏弹窗\r\n    this.setState({ display: 'none' })\r\n\r\n\r\n    // 停止计时器\r\n    clearInterval(this.timer)\r\n\r\n  }\r\n\r\n  render() {\r\n    const classType = ['行政班', '教学班']\r\n    const exitPermissions = ['允许退出', '通知班级管理员审核后退出', '禁止退出']\r\n    const grade = ['年级', '一年级', '二年级', '三年级', '四年级']\r\n    const section = ['学段', '小学', '初中', '高中', '大学']\r\n    const { saveData, classInptChange, schoolInptChange, backlCass, continueClick, state: { display, width, height } } = this\r\n    return (\r\n      <div>\r\n        <div className='class-create-totabar'>\r\n          {/* 顶部导航 */}\r\n          <div className=\"contenter-top-nav-bar\">\r\n            <div className=\"route-title\">\r\n              <h2 >我的班级</h2>\r\n            </div>\r\n            {/* <button className='creat-class'>创建班级</button> */}\r\n            <BackClassBtn />\r\n          </div>\r\n\r\n          <div className=\"class-create-bar\">\r\n            <p className='create-tip'>尊敬的<span>老师(刘老师)</span>，请填写班级信息：</p>\r\n            <form action=\"\">\r\n\r\n              {/* 输入学校 */}\r\n              <div className='school'>\r\n                <i>学校</i><input ref={this.schoolRef} onChange={schoolInptChange} type=\"text\" placeholder='请选择学校' />\r\n                <div ref={this.schoolChildRef} className='school-tips  school-tips-hide '><div></div><p>请输入4-20位的中文或者5-50位的字母</p></div>\r\n              </div>\r\n\r\n              {/* 选择选段 */}\r\n              <div className=\"section\">\r\n                <i><span>*</span>学段</i>\r\n                {\r\n                  this.state.hasError ? <h2>当前网络不稳定，稍后再试</h2> : <DropDowm data={section} pubName='sectionValue' liValue='section' />\r\n                }\r\n\r\n              </div>\r\n\r\n              {/* 选择年级 */}\r\n              <div className=\"grade\">\r\n                <i><span>*</span>年级</i>\r\n                {\r\n                  this.state.hasError ? <h2>当前网络不稳定，稍后再试</h2> : <DropDowm data={grade} pubName='gradeValue' liValue='grade' />\r\n                }\r\n\r\n              </div>\r\n\r\n              {/* 输入班级名 */}\r\n              <div className='class-name'>\r\n                <i><span>*</span>班级名</i><input onChange={classInptChange} ref={this.classRef} type=\"text\" name=\"\" id=\"\" placeholder='请输入班级名称，限20字符，不支持输入_和%' />\r\n                <div ref={this.classChildRef} className='course-tips  course-tips-hide'><div></div><p>限20字符，不支持输入_和%' </p></div>\r\n              </div>\r\n\r\n              {/* 选择类型 */}\r\n              <div className='class-type'>\r\n                <i>类型</i>\r\n                {\r\n                  this.state.hasError ? <h2>当前网络不稳定，稍后再试</h2> : <SingleBox data={classType} singleBoxName='classType' />\r\n                }\r\n\r\n              </div>\r\n\r\n              {/* 退出权限设置 */}\r\n              <div className='exit-permissions'>\r\n                <i>退出权限设置</i>\r\n                {\r\n                  this.state.hasError ? <h2>当前网络不稳定，稍后再试</h2> : <SingleBox data={exitPermissions} singleBoxName='exitPermissions' />\r\n                }\r\n\r\n\r\n              </div>\r\n              {/* 保存按钮 */}\r\n              <button onClick={saveData}>保存</button>\r\n\r\n\r\n            </form>\r\n            <div className=\"confirm-Window\" style={{ display, width, height }}>\r\n              <div className=\"confirm-body\" >\r\n                <div className=\"confirm-content\">添加班级成功！！！</div>\r\n                <div className=\"btns\">\r\n                  <a onClick={backlCass} href=\"/\" className=\"btn-back\" >返回我的班级</a>\r\n                  <a onClick={continueClick} href=\"/\" className=\"btn-continue\"  >继续添加</a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { connect } from 'react-redux'\r\n\r\nimport Create from '../../page/Set/Class/Create'\r\nimport { setSchoolValue, setClassValue } from '../../redux/actions/createClass'\r\n\r\nexport default connect(state => ({\r\n  createClass: state.createClass,\r\n  dropDowm: state.dropDowm,\r\n  singleBox: state.singleBox\r\n}), {\r\n  setSchoolValue,\r\n  setClassValue\r\n})(Create)\r\n","/* \r\n  该文件专门为createClass组件生成action对象\r\n*/\r\nimport { SETSCHOOL } from '../counstant'\r\nexport const setSchoolValue = (data) => {\r\n  return {\r\n    type: SETSCHOOL,\r\n    data\r\n  }\r\n}\r\nexport const setClassValue = (data) => {\r\n  return {\r\n    type: 'setClass',\r\n    data\r\n  }\r\n}","import React, { PureComponent } from 'react'\r\nimport { Link, Route, Switch } from 'react-router-dom'\r\nimport PubSub from 'pubsub-js'\r\n\r\nimport { request } from '../../../network/request'\r\nimport ClassSynopsis from '../../../components/content/ClassSynopsis'\r\nimport Detail from '../../../containers/Detail'\r\nimport Create from '../../../containers/Create'\r\n\r\nimport './css/index.css'\r\n\r\nexport default class MyClass extends PureComponent {\r\n\r\n\r\n  state = {\r\n    classes: []\r\n  }\r\n  // 组件加载完成\r\n  componentDidMount() {\r\n\r\n    // 订阅创建班级表单提交\r\n    this.createClassToken = PubSub.subscribe('createClass', (a, data) => {\r\n\r\n      const { section, grade, headmaster, classType } = data\r\n      // 向数据库添加一条数据\r\n      request({\r\n        method: 'POST',\r\n        url: '/classes',\r\n        data: {\r\n          section, grade, headmaster, classType\r\n        }\r\n      }).then(res => {\r\n        // console.log(res);\r\n        // 获取新的数据 刷新页面\r\n        this.getClassse()\r\n      }).catch(err => console.log(err))\r\n\r\n    })\r\n    // 获取classes数据\r\n    this.getClassse()\r\n  }\r\n\r\n  // 组件将要卸载\r\n  componentWillUnmount() {\r\n    // 取消订阅\r\n    PubSub.unsubscribe(this.createClassToken)\r\n  }\r\n\r\n  // 二次封装axios\r\n  getClassse = () => {\r\n    request({\r\n      method: 'GET',\r\n      url: '/classes'\r\n    }).then(res => {\r\n      // console.log(res);\r\n      this.setState({ classes: res })\r\n    }).catch(err => { console.log(err); })\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.state\r\n    return (\r\n      <div>\r\n        {/* 顶部导航 */}\r\n        <div className=\"contenter-top-nav-bar\">\r\n          <div className=\"route-title\">\r\n            <h2 >我的班级</h2>\r\n          </div>\r\n          <Link to='/class/create' ><button className='creat-class'>创建班级</button></Link>\r\n          {/* <button className='join-class'>加入班级</button> */}\r\n        </div>\r\n        <div className=\"class-totall-bar\">\r\n          <h3>行政班是为学生管理和教学管理而建设的班级</h3>\r\n\r\n          <div className=\"class-bar\">\r\n            {\r\n              classes.map(classesObj =>\r\n                classesObj.classType === '行政班' ?\r\n                  <Link to={`/class/${classesObj.id}`} key={classesObj.id}  >\r\n                    < ClassSynopsis  {...classesObj} />\r\n                  </Link> : []\r\n              )\r\n            }\r\n          </div>\r\n\r\n          <h3>教学班是根据教学要求而设置的班级</h3>\r\n          <div className=\"class-bar\">\r\n            {\r\n              classes.map(classesObj => classesObj.classType === '教学班' ?\r\n                <Link to={`/class/${classesObj.id}`} key={classesObj.id}  >\r\n                  < ClassSynopsis  {...classesObj} />\r\n                </Link> : []\r\n              )\r\n            }\r\n          </div>\r\n        </div>\r\n        <Switch>\r\n          <Route path='/class/create' component={Create}></Route>\r\n          <Route path={`/class/:id`} component={Detail}></Route>\r\n        </Switch>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}